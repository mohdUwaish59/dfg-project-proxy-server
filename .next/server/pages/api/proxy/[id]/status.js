"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/proxy/[id]/status";
exports.ids = ["pages/api/proxy/[id]/status"];
exports.modules = {

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fproxy%2F%5Bid%5D%2Fstatus&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cproxy%5C%5Bid%5D%5Cstatus.js&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fproxy%2F%5Bid%5D%2Fstatus&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cproxy%5C%5Bid%5D%5Cstatus.js&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_proxy_id_status_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\proxy\\[id]\\status.js */ \"(api)/./pages/api/proxy/[id]/status.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_proxy_id_status_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_proxy_id_status_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/proxy/[id]/status\",\n        pathname: \"/api/proxy/[id]/status\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_proxy_id_status_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnByb3h5JTJGJTVCaWQlNUQlMkZzdGF0dXMmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyU1Q2FwaSU1Q3Byb3h5JTVDJTVCaWQlNUQlNUNzdGF0dXMuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDaUU7QUFDakU7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLDBEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQywwREFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vdHJlZS1wcm94eS1zZXJ2ZXIvPzIzZmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzXFxcXGFwaVxcXFxwcm94eVxcXFxbaWRdXFxcXHN0YXR1cy5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3Byb3h5L1tpZF0vc3RhdHVzXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcHJveHkvW2lkXS9zdGF0dXNcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fproxy%2F%5Bid%5D%2Fstatus&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cproxy%5C%5Bid%5D%5Cstatus.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/database.js":
/*!*************************!*\
  !*** ./lib/database.js ***!
  \*************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("// Pure Next.js database module (MongoDB only)\n\nconst { MongoClient, ServerApiVersion } = __webpack_require__(/*! mongodb */ \"mongodb\");\nlet client = null;\nlet db = null;\nlet isConnected = false;\nasync function connectToDatabase() {\n    if (isConnected && db) {\n        return db;\n    }\n    if (!process.env.DATABASE_URL) {\n        throw new Error(\"DATABASE_URL environment variable is required\");\n    }\n    try {\n        console.log(\"\\uD83D\\uDD0D Connecting to MongoDB...\");\n        client = new MongoClient(process.env.DATABASE_URL, {\n            serverApi: {\n                version: ServerApiVersion.v1,\n                strict: true,\n                deprecationErrors: true\n            }\n        });\n        await client.connect();\n        db = client.db(\"otree_proxy\");\n        isConnected = true;\n        // Test the connection\n        await client.db(\"admin\").command({\n            ping: 1\n        });\n        console.log(\"✅ MongoDB connected successfully\");\n        // Create indexes\n        await createIndexes();\n        return db;\n    } catch (error) {\n        console.error(\"❌ MongoDB connection failed:\", error);\n        throw error;\n    }\n}\nasync function createIndexes() {\n    try {\n        await db.collection(\"admins\").createIndex({\n            username: 1\n        }, {\n            unique: true\n        });\n        await db.collection(\"proxy_links\").createIndex({\n            proxy_id: 1\n        }, {\n            unique: true\n        });\n        await db.collection(\"link_usage\").createIndex({\n            proxy_id: 1,\n            user_fingerprint: 1\n        }, {\n            unique: true\n        });\n        console.log(\"✅ MongoDB indexes created\");\n    } catch (error) {\n        console.log(\"ℹ️ MongoDB indexes may already exist:\", error.message);\n    }\n}\n// Database operations\nasync function findAdmin(username) {\n    const database = await connectToDatabase();\n    return await database.collection(\"admins\").findOne({\n        username\n    });\n}\nasync function findAdminWithPassword(username, password) {\n    const database = await connectToDatabase();\n    return await database.collection(\"admins\").findOne({\n        username,\n        password\n    });\n}\nasync function getAllAdmins() {\n    const database = await connectToDatabase();\n    return await database.collection(\"admins\").find({}).toArray();\n}\nasync function createAdmin(username, password) {\n    const database = await connectToDatabase();\n    return await database.collection(\"admins\").insertOne({\n        username,\n        password,\n        created_at: new Date()\n    });\n}\nasync function getAllProxyLinks() {\n    const database = await connectToDatabase();\n    const links = await database.collection(\"proxy_links\").find({}).sort({\n        created_at: -1\n    }).toArray();\n    // Convert MongoDB format to frontend-compatible format\n    return links.map((link, index)=>({\n            id: link._id ? link._id.toString() : index + 1,\n            proxy_id: link.proxy_id,\n            real_url: link.real_url,\n            group_name: link.group_name,\n            category: link.category || null,\n            treatment_title: link.treatment_title || null,\n            max_uses: link.max_uses || 3,\n            current_uses: link.current_uses || 0,\n            is_active: link.is_active !== false,\n            status: link.status || \"active\",\n            completed_at: link.completed_at,\n            created_at: link.created_at instanceof Date ? link.created_at.toISOString() : link.created_at || new Date().toISOString(),\n            created_by: link.created_by || \"admin\"\n        }));\n}\nasync function getProxyLink(proxyId) {\n    const database = await connectToDatabase();\n    return await database.collection(\"proxy_links\").findOne({\n        proxy_id: proxyId\n    });\n}\nasync function getActiveProxyLink(proxyId) {\n    const database = await connectToDatabase();\n    return await database.collection(\"proxy_links\").findOne({\n        proxy_id: proxyId,\n        is_active: {\n            $ne: false\n        }\n    });\n}\nasync function createProxyLink(proxyId, realUrl, groupName, maxUses = 3, category = null, treatmentTitle = null) {\n    const database = await connectToDatabase();\n    return await database.collection(\"proxy_links\").insertOne({\n        proxy_id: proxyId,\n        real_url: realUrl,\n        group_name: groupName,\n        category: category,\n        treatment_title: treatmentTitle,\n        max_uses: maxUses,\n        current_uses: 0,\n        is_active: true,\n        room_start_time: null,\n        room_expired: false,\n        created_at: new Date(),\n        created_by: \"admin\"\n    });\n}\nasync function updateProxyLinkStatus(proxyId, isActive) {\n    const database = await connectToDatabase();\n    return await database.collection(\"proxy_links\").updateOne({\n        proxy_id: proxyId\n    }, {\n        $set: {\n            is_active: isActive\n        }\n    });\n}\nasync function incrementProxyLinkUsage(proxyId) {\n    const database = await connectToDatabase();\n    return await database.collection(\"proxy_links\").updateOne({\n        proxy_id: proxyId\n    }, {\n        $inc: {\n            current_uses: 1\n        }\n    });\n}\nasync function resetProxyLinkUsage(proxyId) {\n    const database = await connectToDatabase();\n    await database.collection(\"proxy_links\").updateOne({\n        proxy_id: proxyId\n    }, {\n        $set: {\n            current_uses: 0\n        }\n    });\n    return await database.collection(\"link_usage\").deleteMany({\n        proxy_id: proxyId\n    });\n}\nasync function deleteProxyLink(proxyId) {\n    const database = await connectToDatabase();\n    await database.collection(\"link_usage\").deleteMany({\n        proxy_id: proxyId\n    });\n    return await database.collection(\"proxy_links\").deleteOne({\n        proxy_id: proxyId\n    });\n}\nasync function checkLinkUsage(proxyId, userFingerprint) {\n    const database = await connectToDatabase();\n    return await database.collection(\"link_usage\").findOne({\n        proxy_id: proxyId,\n        user_fingerprint: userFingerprint\n    });\n}\nasync function recordLinkUsage(proxyId, sessionId, userIp, userFingerprint, participantNumber) {\n    const database = await connectToDatabase();\n    return await database.collection(\"link_usage\").insertOne({\n        proxy_id: proxyId,\n        session_id: sessionId,\n        user_ip: userIp,\n        user_fingerprint: userFingerprint,\n        participant_number: participantNumber,\n        status: \"waiting\",\n        group_session_id: null,\n        joined_at: new Date(),\n        redirected_at: null,\n        used_at: new Date()\n    });\n}\n// New functions for group management\nasync function getWaitingParticipants(proxyId) {\n    const database = await connectToDatabase();\n    return await database.collection(\"link_usage\").find({\n        proxy_id: proxyId,\n        status: \"waiting\"\n    }).sort({\n        joined_at: 1\n    }).toArray();\n}\nasync function getAllParticipants(proxyId) {\n    const database = await connectToDatabase();\n    return await database.collection(\"link_usage\").find({\n        proxy_id: proxyId\n    }).sort({\n        joined_at: 1\n    }).toArray();\n}\nasync function updateParticipantStatus(proxyId, userFingerprint, status, groupSessionId = null) {\n    const database = await connectToDatabase();\n    const updateData = {\n        status,\n        ...status === \"redirected\" && {\n            redirected_at: new Date()\n        },\n        ...groupSessionId && {\n            group_session_id: groupSessionId\n        }\n    };\n    return await database.collection(\"link_usage\").updateOne({\n        proxy_id: proxyId,\n        user_fingerprint: userFingerprint\n    }, {\n        $set: updateData\n    });\n}\nasync function createGroupSession(proxyId, participantFingerprints) {\n    const database = await connectToDatabase();\n    const groupSessionId = (__webpack_require__(/*! crypto */ \"crypto\").randomBytes)(16).toString(\"hex\");\n    console.log(\"Creating group session - updating participants:\", participantFingerprints.map((fp)=>fp.substring(0, 8) + \"...\"));\n    // Update ALL participants with the group session ID (remove status filter)\n    const updateResult = await database.collection(\"link_usage\").updateMany({\n        proxy_id: proxyId,\n        user_fingerprint: {\n            $in: participantFingerprints\n        }\n    }, {\n        $set: {\n            group_session_id: groupSessionId,\n            status: \"redirected\",\n            redirected_at: new Date()\n        }\n    });\n    console.log(\"Group session update result:\", {\n        matchedCount: updateResult.matchedCount,\n        modifiedCount: updateResult.modifiedCount,\n        groupSessionId\n    });\n    // Mark the proxy link as used/completed when all participants are redirected\n    await database.collection(\"proxy_links\").updateOne({\n        proxy_id: proxyId\n    }, {\n        $set: {\n            status: \"used\",\n            completed_at: new Date(),\n            current_uses: participantFingerprints.length\n        }\n    });\n    return groupSessionId;\n}\nasync function getGroupStatus(proxyId) {\n    const database = await connectToDatabase();\n    const link = await database.collection(\"proxy_links\").findOne({\n        proxy_id: proxyId\n    });\n    if (!link) return null;\n    const waitingParticipants = await getWaitingParticipants(proxyId);\n    const allParticipants = await database.collection(\"link_usage\").find({\n        proxy_id: proxyId\n    }).toArray();\n    const redirectedParticipants = allParticipants.filter((p)=>p.status === \"redirected\");\n    const expiredParticipants = allParticipants.filter((p)=>p.status === \"expired\");\n    const totalJoined = allParticipants.length;\n    const isGroupComplete = totalJoined >= link.max_uses;\n    const hasRedirectedGroup = redirectedParticipants.length > 0;\n    const isExpired = link.room_expired || link.status === \"expired\";\n    return {\n        proxy_id: proxyId,\n        group_name: link.group_name,\n        category: link.category,\n        treatment_title: link.treatment_title,\n        max_uses: link.max_uses,\n        current_waiting: waitingParticipants.length,\n        total_joined: totalJoined,\n        is_full: isGroupComplete,\n        has_redirected_group: hasRedirectedGroup,\n        is_expired: isExpired,\n        room_start_time: link.room_start_time,\n        waiting_participants: waitingParticipants.map((p)=>({\n                participant_number: p.participant_number,\n                joined_at: p.joined_at,\n                fingerprint: p.user_fingerprint.substring(0, 8) + \"...\" // Partial for privacy\n            })),\n        redirected_participants: redirectedParticipants.map((p)=>({\n                participant_number: p.participant_number,\n                redirected_at: p.redirected_at,\n                group_session_id: p.group_session_id\n            })),\n        expired_participants: expiredParticipants.map((p)=>({\n                participant_number: p.participant_number,\n                joined_at: p.joined_at,\n                fingerprint: p.user_fingerprint.substring(0, 8) + \"...\"\n            })),\n        real_url: link.real_url\n    };\n}\n// Room timing functions\nasync function setRoomStartTime(proxyId) {\n    const database = await connectToDatabase();\n    const now = new Date();\n    return await database.collection(\"proxy_links\").updateOne({\n        proxy_id: proxyId,\n        room_start_time: null\n    }, {\n        $set: {\n            room_start_time: now\n        }\n    });\n}\nasync function expireRoom(proxyId) {\n    const database = await connectToDatabase();\n    // Mark room as expired\n    await database.collection(\"proxy_links\").updateOne({\n        proxy_id: proxyId\n    }, {\n        $set: {\n            room_expired: true,\n            is_active: false,\n            status: \"expired\",\n            completed_at: new Date()\n        }\n    });\n    // Update all waiting participants to expired status\n    return await database.collection(\"link_usage\").updateMany({\n        proxy_id: proxyId,\n        status: \"waiting\"\n    }, {\n        $set: {\n            status: \"expired\"\n        }\n    });\n}\nasync function checkRoomExpiration(proxyId) {\n    const database = await connectToDatabase();\n    const link = await database.collection(\"proxy_links\").findOne({\n        proxy_id: proxyId\n    });\n    if (!link || !link.room_start_time || link.room_expired) {\n        return {\n            expired: link?.room_expired || false,\n            timeLeft: 0\n        };\n    }\n    const now = new Date();\n    const elapsed = Math.floor((now - link.room_start_time) / 1000);\n    const timeLeft = Math.max(0, 600 - elapsed); // 10 minutes = 600 seconds\n    if (timeLeft <= 0 && !link.room_expired) {\n        // Room has expired, mark it\n        await expireRoom(proxyId);\n        return {\n            expired: true,\n            timeLeft: 0\n        };\n    }\n    return {\n        expired: false,\n        timeLeft,\n        roomStartTime: link.room_start_time.getTime()\n    };\n}\nasync function getProxyStats() {\n    const database = await connectToDatabase();\n    const links = await database.collection(\"proxy_links\").find({}).toArray();\n    const total = links.length;\n    const active = links.filter((link)=>link.is_active !== false && link.status !== \"used\" && link.status !== \"expired\").length;\n    const participants = links.reduce((sum, link)=>sum + (link.current_uses || 0), 0);\n    const full = links.filter((link)=>(link.current_uses || 0) >= (link.max_uses || 3)).length;\n    const used = links.filter((link)=>link.status === \"used\").length;\n    const expired = links.filter((link)=>link.status === \"expired\").length;\n    return {\n        total,\n        active,\n        participants,\n        full,\n        used,\n        expired\n    };\n}\nmodule.exports = {\n    connectToDatabase,\n    findAdmin,\n    findAdminWithPassword,\n    getAllAdmins,\n    createAdmin,\n    getAllProxyLinks,\n    getProxyLink,\n    getActiveProxyLink,\n    createProxyLink,\n    updateProxyLinkStatus,\n    incrementProxyLinkUsage,\n    resetProxyLinkUsage,\n    deleteProxyLink,\n    checkLinkUsage,\n    recordLinkUsage,\n    getProxyStats,\n    // New group management functions\n    getWaitingParticipants,\n    updateParticipantStatus,\n    createGroupSession,\n    getGroupStatus,\n    // Room timing functions\n    setRoomStartTime,\n    expireRoom,\n    checkRoomExpiration,\n    getAllParticipants\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxDQUFDLEdBQUdDLE9BQU87SUFFdkUsTUFBTTRHLFFBQVF0RyxNQUFNb0UsTUFBTTtJQUMxQixNQUFNbUMsU0FBU3ZHLE1BQU15RSxNQUFNLENBQUN0RSxDQUFBQSxPQUFRQSxLQUFLVyxTQUFTLEtBQUssU0FBU1gsS0FBS1ksTUFBTSxLQUFLLFVBQVVaLEtBQUtZLE1BQU0sS0FBSyxXQUFXcUQsTUFBTTtJQUMzSCxNQUFNb0MsZUFBZXhHLE1BQU15RyxNQUFNLENBQUMsQ0FBQ0MsS0FBS3ZHLE9BQVN1RyxNQUFPdkcsQ0FBQUEsS0FBS1UsWUFBWSxJQUFJLElBQUk7SUFDakYsTUFBTThGLE9BQU8zRyxNQUFNeUUsTUFBTSxDQUFDdEUsQ0FBQUEsT0FBUSxDQUFDQSxLQUFLVSxZQUFZLElBQUksTUFBT1YsQ0FBQUEsS0FBS1MsUUFBUSxJQUFJLElBQUl3RCxNQUFNO0lBQzFGLE1BQU13QyxPQUFPNUcsTUFBTXlFLE1BQU0sQ0FBQ3RFLENBQUFBLE9BQVFBLEtBQUtZLE1BQU0sS0FBSyxRQUFRcUQsTUFBTTtJQUNoRSxNQUFNeUIsVUFBVTdGLE1BQU15RSxNQUFNLENBQUN0RSxDQUFBQSxPQUFRQSxLQUFLWSxNQUFNLEtBQUssV0FBV3FELE1BQU07SUFFdEUsT0FBTztRQUFFa0M7UUFBT0M7UUFBUUM7UUFBY0c7UUFBTUM7UUFBTWY7SUFBUTtBQUM1RDtBQUVBZ0IsT0FBT0MsT0FBTyxHQUFHO0lBQ2ZuSjtJQUNBd0I7SUFDQUc7SUFDQUU7SUFDQUc7SUFDQUk7SUFDQW9CO0lBQ0FFO0lBQ0FFO0lBQ0FPO0lBQ0FJO0lBQ0FFO0lBQ0FFO0lBQ0FFO0lBQ0FFO0lBQ0EyRDtJQUNBLGlDQUFpQztJQUNqQ2hEO0lBQ0FFO0lBQ0FHO0lBQ0FXO0lBQ0Esd0JBQXdCO0lBQ3hCb0I7SUFDQUU7SUFDQUM7SUFDQXRDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vdHJlZS1wcm94eS1zZXJ2ZXIvLi9saWIvZGF0YWJhc2UuanM/ZWVhNSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBQdXJlIE5leHQuanMgZGF0YWJhc2UgbW9kdWxlIChNb25nb0RCIG9ubHkpXHJcbmNvbnN0IHsgTW9uZ29DbGllbnQsIFNlcnZlckFwaVZlcnNpb24gfSA9IHJlcXVpcmUoJ21vbmdvZGInKTtcclxuXHJcbmxldCBjbGllbnQgPSBudWxsO1xyXG5sZXQgZGIgPSBudWxsO1xyXG5sZXQgaXNDb25uZWN0ZWQgPSBmYWxzZTtcclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGNvbm5lY3RUb0RhdGFiYXNlKCkge1xyXG4gIGlmIChpc0Nvbm5lY3RlZCAmJiBkYikge1xyXG4gICAgcmV0dXJuIGRiO1xyXG4gIH1cclxuXHJcbiAgaWYgKCFwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkwpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignREFUQUJBU0VfVVJMIGVudmlyb25tZW50IHZhcmlhYmxlIGlzIHJlcXVpcmVkJyk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc29sZS5sb2coJ/CflI0gQ29ubmVjdGluZyB0byBNb25nb0RCLi4uJyk7XHJcbiAgICBcclxuICAgIGNsaWVudCA9IG5ldyBNb25nb0NsaWVudChwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkwsIHtcclxuICAgICAgc2VydmVyQXBpOiB7XHJcbiAgICAgICAgdmVyc2lvbjogU2VydmVyQXBpVmVyc2lvbi52MSxcclxuICAgICAgICBzdHJpY3Q6IHRydWUsXHJcbiAgICAgICAgZGVwcmVjYXRpb25FcnJvcnM6IHRydWUsXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGF3YWl0IGNsaWVudC5jb25uZWN0KCk7XHJcbiAgICBkYiA9IGNsaWVudC5kYignb3RyZWVfcHJveHknKTtcclxuICAgIGlzQ29ubmVjdGVkID0gdHJ1ZTtcclxuXHJcbiAgICAvLyBUZXN0IHRoZSBjb25uZWN0aW9uXHJcbiAgICBhd2FpdCBjbGllbnQuZGIoXCJhZG1pblwiKS5jb21tYW5kKHsgcGluZzogMSB9KTtcclxuICAgIGNvbnNvbGUubG9nKCfinIUgTW9uZ29EQiBjb25uZWN0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XHJcblxyXG4gICAgLy8gQ3JlYXRlIGluZGV4ZXNcclxuICAgIGF3YWl0IGNyZWF0ZUluZGV4ZXMoKTtcclxuXHJcbiAgICByZXR1cm4gZGI7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBNb25nb0RCIGNvbm5lY3Rpb24gZmFpbGVkOicsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlSW5kZXhlcygpIHtcclxuICB0cnkge1xyXG4gICAgYXdhaXQgZGIuY29sbGVjdGlvbignYWRtaW5zJykuY3JlYXRlSW5kZXgoeyB1c2VybmFtZTogMSB9LCB7IHVuaXF1ZTogdHJ1ZSB9KTtcclxuICAgIGF3YWl0IGRiLmNvbGxlY3Rpb24oJ3Byb3h5X2xpbmtzJykuY3JlYXRlSW5kZXgoeyBwcm94eV9pZDogMSB9LCB7IHVuaXF1ZTogdHJ1ZSB9KTtcclxuICAgIGF3YWl0IGRiLmNvbGxlY3Rpb24oJ2xpbmtfdXNhZ2UnKS5jcmVhdGVJbmRleCh7IHByb3h5X2lkOiAxLCB1c2VyX2ZpbmdlcnByaW50OiAxIH0sIHsgdW5pcXVlOiB0cnVlIH0pO1xyXG4gICAgY29uc29sZS5sb2coJ+KchSBNb25nb0RCIGluZGV4ZXMgY3JlYXRlZCcpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmxvZygn4oS577iPIE1vbmdvREIgaW5kZXhlcyBtYXkgYWxyZWFkeSBleGlzdDonLCBlcnJvci5tZXNzYWdlKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIERhdGFiYXNlIG9wZXJhdGlvbnNcclxuYXN5bmMgZnVuY3Rpb24gZmluZEFkbWluKHVzZXJuYW1lKSB7XHJcbiAgY29uc3QgZGF0YWJhc2UgPSBhd2FpdCBjb25uZWN0VG9EYXRhYmFzZSgpO1xyXG4gIHJldHVybiBhd2FpdCBkYXRhYmFzZS5jb2xsZWN0aW9uKCdhZG1pbnMnKS5maW5kT25lKHsgdXNlcm5hbWUgfSk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGZpbmRBZG1pbldpdGhQYXNzd29yZCh1c2VybmFtZSwgcGFzc3dvcmQpIHtcclxuICBjb25zdCBkYXRhYmFzZSA9IGF3YWl0IGNvbm5lY3RUb0RhdGFiYXNlKCk7XHJcbiAgcmV0dXJuIGF3YWl0IGRhdGFiYXNlLmNvbGxlY3Rpb24oJ2FkbWlucycpLmZpbmRPbmUoeyB1c2VybmFtZSwgcGFzc3dvcmQgfSk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGdldEFsbEFkbWlucygpIHtcclxuICBjb25zdCBkYXRhYmFzZSA9IGF3YWl0IGNvbm5lY3RUb0RhdGFiYXNlKCk7XHJcbiAgcmV0dXJuIGF3YWl0IGRhdGFiYXNlLmNvbGxlY3Rpb24oJ2FkbWlucycpLmZpbmQoe30pLnRvQXJyYXkoKTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlQWRtaW4odXNlcm5hbWUsIHBhc3N3b3JkKSB7XHJcbiAgY29uc3QgZGF0YWJhc2UgPSBhd2FpdCBjb25uZWN0VG9EYXRhYmFzZSgpO1xyXG4gIHJldHVybiBhd2FpdCBkYXRhYmFzZS5jb2xsZWN0aW9uKCdhZG1pbnMnKS5pbnNlcnRPbmUoe1xyXG4gICAgdXNlcm5hbWUsXHJcbiAgICBwYXNzd29yZCxcclxuICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKClcclxuICB9KTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZ2V0QWxsUHJveHlMaW5rcygpIHtcclxuICBjb25zdCBkYXRhYmFzZSA9IGF3YWl0IGNvbm5lY3RUb0RhdGFiYXNlKCk7XHJcbiAgY29uc3QgbGlua3MgPSBhd2FpdCBkYXRhYmFzZS5jb2xsZWN0aW9uKCdwcm94eV9saW5rcycpLmZpbmQoe30pLnNvcnQoeyBjcmVhdGVkX2F0OiAtMSB9KS50b0FycmF5KCk7XHJcbiAgXHJcbiAgLy8gQ29udmVydCBNb25nb0RCIGZvcm1hdCB0byBmcm9udGVuZC1jb21wYXRpYmxlIGZvcm1hdFxyXG4gIHJldHVybiBsaW5rcy5tYXAoKGxpbmssIGluZGV4KSA9PiAoe1xyXG4gICAgaWQ6IGxpbmsuX2lkID8gbGluay5faWQudG9TdHJpbmcoKSA6IGluZGV4ICsgMSxcclxuICAgIHByb3h5X2lkOiBsaW5rLnByb3h5X2lkLFxyXG4gICAgcmVhbF91cmw6IGxpbmsucmVhbF91cmwsXHJcbiAgICBncm91cF9uYW1lOiBsaW5rLmdyb3VwX25hbWUsXHJcbiAgICBjYXRlZ29yeTogbGluay5jYXRlZ29yeSB8fCBudWxsLFxyXG4gICAgdHJlYXRtZW50X3RpdGxlOiBsaW5rLnRyZWF0bWVudF90aXRsZSB8fCBudWxsLFxyXG4gICAgbWF4X3VzZXM6IGxpbmsubWF4X3VzZXMgfHwgMyxcclxuICAgIGN1cnJlbnRfdXNlczogbGluay5jdXJyZW50X3VzZXMgfHwgMCxcclxuICAgIGlzX2FjdGl2ZTogbGluay5pc19hY3RpdmUgIT09IGZhbHNlLFxyXG4gICAgc3RhdHVzOiBsaW5rLnN0YXR1cyB8fCAnYWN0aXZlJywgLy8gYWN0aXZlLCB1c2VkLCBpbmFjdGl2ZVxyXG4gICAgY29tcGxldGVkX2F0OiBsaW5rLmNvbXBsZXRlZF9hdCxcclxuICAgIGNyZWF0ZWRfYXQ6IGxpbmsuY3JlYXRlZF9hdCBpbnN0YW5jZW9mIERhdGUgPyBsaW5rLmNyZWF0ZWRfYXQudG9JU09TdHJpbmcoKSA6IChsaW5rLmNyZWF0ZWRfYXQgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpKSxcclxuICAgIGNyZWF0ZWRfYnk6IGxpbmsuY3JlYXRlZF9ieSB8fCAnYWRtaW4nXHJcbiAgfSkpO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBnZXRQcm94eUxpbmsocHJveHlJZCkge1xyXG4gIGNvbnN0IGRhdGFiYXNlID0gYXdhaXQgY29ubmVjdFRvRGF0YWJhc2UoKTtcclxuICByZXR1cm4gYXdhaXQgZGF0YWJhc2UuY29sbGVjdGlvbigncHJveHlfbGlua3MnKS5maW5kT25lKHsgcHJveHlfaWQ6IHByb3h5SWQgfSk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGdldEFjdGl2ZVByb3h5TGluayhwcm94eUlkKSB7XHJcbiAgY29uc3QgZGF0YWJhc2UgPSBhd2FpdCBjb25uZWN0VG9EYXRhYmFzZSgpO1xyXG4gIHJldHVybiBhd2FpdCBkYXRhYmFzZS5jb2xsZWN0aW9uKCdwcm94eV9saW5rcycpLmZpbmRPbmUoeyBcclxuICAgIHByb3h5X2lkOiBwcm94eUlkLCBcclxuICAgIGlzX2FjdGl2ZTogeyAkbmU6IGZhbHNlIH1cclxuICB9KTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlUHJveHlMaW5rKHByb3h5SWQsIHJlYWxVcmwsIGdyb3VwTmFtZSwgbWF4VXNlcyA9IDMsIGNhdGVnb3J5ID0gbnVsbCwgdHJlYXRtZW50VGl0bGUgPSBudWxsKSB7XHJcbiAgY29uc3QgZGF0YWJhc2UgPSBhd2FpdCBjb25uZWN0VG9EYXRhYmFzZSgpO1xyXG4gIHJldHVybiBhd2FpdCBkYXRhYmFzZS5jb2xsZWN0aW9uKCdwcm94eV9saW5rcycpLmluc2VydE9uZSh7XHJcbiAgICBwcm94eV9pZDogcHJveHlJZCxcclxuICAgIHJlYWxfdXJsOiByZWFsVXJsLFxyXG4gICAgZ3JvdXBfbmFtZTogZ3JvdXBOYW1lLFxyXG4gICAgY2F0ZWdvcnk6IGNhdGVnb3J5LCAvLyBObyBHZW5kZXIsIEFsbCBNYWxlLCBBbGwgRmVtYWxlLCBNaXhlZFxyXG4gICAgdHJlYXRtZW50X3RpdGxlOiB0cmVhdG1lbnRUaXRsZSwgLy8gVHJlYXRtZW50IDEtNCBvcHRpb25zXHJcbiAgICBtYXhfdXNlczogbWF4VXNlcyxcclxuICAgIGN1cnJlbnRfdXNlczogMCxcclxuICAgIGlzX2FjdGl2ZTogdHJ1ZSxcclxuICAgIHJvb21fc3RhcnRfdGltZTogbnVsbCwgLy8gVGltZXN0YW1wIHdoZW4gZmlyc3QgcGFydGljaXBhbnQgam9pbnNcclxuICAgIHJvb21fZXhwaXJlZDogZmFsc2UsIC8vIFdoZXRoZXIgcm9vbSBoYXMgZXhwaXJlZFxyXG4gICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKSxcclxuICAgIGNyZWF0ZWRfYnk6ICdhZG1pbidcclxuICB9KTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlUHJveHlMaW5rU3RhdHVzKHByb3h5SWQsIGlzQWN0aXZlKSB7XHJcbiAgY29uc3QgZGF0YWJhc2UgPSBhd2FpdCBjb25uZWN0VG9EYXRhYmFzZSgpO1xyXG4gIHJldHVybiBhd2FpdCBkYXRhYmFzZS5jb2xsZWN0aW9uKCdwcm94eV9saW5rcycpLnVwZGF0ZU9uZShcclxuICAgIHsgcHJveHlfaWQ6IHByb3h5SWQgfSxcclxuICAgIHsgJHNldDogeyBpc19hY3RpdmU6IGlzQWN0aXZlIH0gfVxyXG4gICk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGluY3JlbWVudFByb3h5TGlua1VzYWdlKHByb3h5SWQpIHtcclxuICBjb25zdCBkYXRhYmFzZSA9IGF3YWl0IGNvbm5lY3RUb0RhdGFiYXNlKCk7XHJcbiAgcmV0dXJuIGF3YWl0IGRhdGFiYXNlLmNvbGxlY3Rpb24oJ3Byb3h5X2xpbmtzJykudXBkYXRlT25lKFxyXG4gICAgeyBwcm94eV9pZDogcHJveHlJZCB9LFxyXG4gICAgeyAkaW5jOiB7IGN1cnJlbnRfdXNlczogMSB9IH1cclxuICApO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiByZXNldFByb3h5TGlua1VzYWdlKHByb3h5SWQpIHtcclxuICBjb25zdCBkYXRhYmFzZSA9IGF3YWl0IGNvbm5lY3RUb0RhdGFiYXNlKCk7XHJcbiAgYXdhaXQgZGF0YWJhc2UuY29sbGVjdGlvbigncHJveHlfbGlua3MnKS51cGRhdGVPbmUoXHJcbiAgICB7IHByb3h5X2lkOiBwcm94eUlkIH0sXHJcbiAgICB7ICRzZXQ6IHsgY3VycmVudF91c2VzOiAwIH0gfVxyXG4gICk7XHJcbiAgcmV0dXJuIGF3YWl0IGRhdGFiYXNlLmNvbGxlY3Rpb24oJ2xpbmtfdXNhZ2UnKS5kZWxldGVNYW55KHsgcHJveHlfaWQ6IHByb3h5SWQgfSk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVByb3h5TGluayhwcm94eUlkKSB7XHJcbiAgY29uc3QgZGF0YWJhc2UgPSBhd2FpdCBjb25uZWN0VG9EYXRhYmFzZSgpO1xyXG4gIGF3YWl0IGRhdGFiYXNlLmNvbGxlY3Rpb24oJ2xpbmtfdXNhZ2UnKS5kZWxldGVNYW55KHsgcHJveHlfaWQ6IHByb3h5SWQgfSk7XHJcbiAgcmV0dXJuIGF3YWl0IGRhdGFiYXNlLmNvbGxlY3Rpb24oJ3Byb3h5X2xpbmtzJykuZGVsZXRlT25lKHsgcHJveHlfaWQ6IHByb3h5SWQgfSk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGNoZWNrTGlua1VzYWdlKHByb3h5SWQsIHVzZXJGaW5nZXJwcmludCkge1xyXG4gIGNvbnN0IGRhdGFiYXNlID0gYXdhaXQgY29ubmVjdFRvRGF0YWJhc2UoKTtcclxuICByZXR1cm4gYXdhaXQgZGF0YWJhc2UuY29sbGVjdGlvbignbGlua191c2FnZScpLmZpbmRPbmUoeyBcclxuICAgIHByb3h5X2lkOiBwcm94eUlkLCBcclxuICAgIHVzZXJfZmluZ2VycHJpbnQ6IHVzZXJGaW5nZXJwcmludCBcclxuICB9KTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gcmVjb3JkTGlua1VzYWdlKHByb3h5SWQsIHNlc3Npb25JZCwgdXNlcklwLCB1c2VyRmluZ2VycHJpbnQsIHBhcnRpY2lwYW50TnVtYmVyKSB7XHJcbiAgY29uc3QgZGF0YWJhc2UgPSBhd2FpdCBjb25uZWN0VG9EYXRhYmFzZSgpO1xyXG4gIHJldHVybiBhd2FpdCBkYXRhYmFzZS5jb2xsZWN0aW9uKCdsaW5rX3VzYWdlJykuaW5zZXJ0T25lKHtcclxuICAgIHByb3h5X2lkOiBwcm94eUlkLFxyXG4gICAgc2Vzc2lvbl9pZDogc2Vzc2lvbklkLFxyXG4gICAgdXNlcl9pcDogdXNlcklwLFxyXG4gICAgdXNlcl9maW5nZXJwcmludDogdXNlckZpbmdlcnByaW50LFxyXG4gICAgcGFydGljaXBhbnRfbnVtYmVyOiBwYXJ0aWNpcGFudE51bWJlcixcclxuICAgIHN0YXR1czogJ3dhaXRpbmcnLCAvLyB3YWl0aW5nLCByZWRpcmVjdGVkXHJcbiAgICBncm91cF9zZXNzaW9uX2lkOiBudWxsLCAvLyBXaWxsIGJlIHNldCB3aGVuIGdyb3VwIGlzIGZvcm1lZFxyXG4gICAgam9pbmVkX2F0OiBuZXcgRGF0ZSgpLFxyXG4gICAgcmVkaXJlY3RlZF9hdDogbnVsbCxcclxuICAgIHVzZWRfYXQ6IG5ldyBEYXRlKClcclxuICB9KTtcclxufVxyXG5cclxuLy8gTmV3IGZ1bmN0aW9ucyBmb3IgZ3JvdXAgbWFuYWdlbWVudFxyXG5hc3luYyBmdW5jdGlvbiBnZXRXYWl0aW5nUGFydGljaXBhbnRzKHByb3h5SWQpIHtcclxuICBjb25zdCBkYXRhYmFzZSA9IGF3YWl0IGNvbm5lY3RUb0RhdGFiYXNlKCk7XHJcbiAgcmV0dXJuIGF3YWl0IGRhdGFiYXNlLmNvbGxlY3Rpb24oJ2xpbmtfdXNhZ2UnKS5maW5kKHsgXHJcbiAgICBwcm94eV9pZDogcHJveHlJZCwgXHJcbiAgICBzdGF0dXM6ICd3YWl0aW5nJyBcclxuICB9KS5zb3J0KHsgam9pbmVkX2F0OiAxIH0pLnRvQXJyYXkoKTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZ2V0QWxsUGFydGljaXBhbnRzKHByb3h5SWQpIHtcclxuICBjb25zdCBkYXRhYmFzZSA9IGF3YWl0IGNvbm5lY3RUb0RhdGFiYXNlKCk7XHJcbiAgcmV0dXJuIGF3YWl0IGRhdGFiYXNlLmNvbGxlY3Rpb24oJ2xpbmtfdXNhZ2UnKS5maW5kKHsgXHJcbiAgICBwcm94eV9pZDogcHJveHlJZCBcclxuICB9KS5zb3J0KHsgam9pbmVkX2F0OiAxIH0pLnRvQXJyYXkoKTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlUGFydGljaXBhbnRTdGF0dXMocHJveHlJZCwgdXNlckZpbmdlcnByaW50LCBzdGF0dXMsIGdyb3VwU2Vzc2lvbklkID0gbnVsbCkge1xyXG4gIGNvbnN0IGRhdGFiYXNlID0gYXdhaXQgY29ubmVjdFRvRGF0YWJhc2UoKTtcclxuICBjb25zdCB1cGRhdGVEYXRhID0geyBcclxuICAgIHN0YXR1cyxcclxuICAgIC4uLihzdGF0dXMgPT09ICdyZWRpcmVjdGVkJyAmJiB7IHJlZGlyZWN0ZWRfYXQ6IG5ldyBEYXRlKCkgfSksXHJcbiAgICAuLi4oZ3JvdXBTZXNzaW9uSWQgJiYgeyBncm91cF9zZXNzaW9uX2lkOiBncm91cFNlc3Npb25JZCB9KVxyXG4gIH07XHJcbiAgXHJcbiAgcmV0dXJuIGF3YWl0IGRhdGFiYXNlLmNvbGxlY3Rpb24oJ2xpbmtfdXNhZ2UnKS51cGRhdGVPbmUoXHJcbiAgICB7IHByb3h5X2lkOiBwcm94eUlkLCB1c2VyX2ZpbmdlcnByaW50OiB1c2VyRmluZ2VycHJpbnQgfSxcclxuICAgIHsgJHNldDogdXBkYXRlRGF0YSB9XHJcbiAgKTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlR3JvdXBTZXNzaW9uKHByb3h5SWQsIHBhcnRpY2lwYW50RmluZ2VycHJpbnRzKSB7XHJcbiAgY29uc3QgZGF0YWJhc2UgPSBhd2FpdCBjb25uZWN0VG9EYXRhYmFzZSgpO1xyXG4gIGNvbnN0IGdyb3VwU2Vzc2lvbklkID0gcmVxdWlyZSgnY3J5cHRvJykucmFuZG9tQnl0ZXMoMTYpLnRvU3RyaW5nKCdoZXgnKTtcclxuICBcclxuICBjb25zb2xlLmxvZygnQ3JlYXRpbmcgZ3JvdXAgc2Vzc2lvbiAtIHVwZGF0aW5nIHBhcnRpY2lwYW50czonLCBwYXJ0aWNpcGFudEZpbmdlcnByaW50cy5tYXAoZnAgPT4gZnAuc3Vic3RyaW5nKDAsIDgpICsgJy4uLicpKTtcclxuICBcclxuICAvLyBVcGRhdGUgQUxMIHBhcnRpY2lwYW50cyB3aXRoIHRoZSBncm91cCBzZXNzaW9uIElEIChyZW1vdmUgc3RhdHVzIGZpbHRlcilcclxuICBjb25zdCB1cGRhdGVSZXN1bHQgPSBhd2FpdCBkYXRhYmFzZS5jb2xsZWN0aW9uKCdsaW5rX3VzYWdlJykudXBkYXRlTWFueShcclxuICAgIHsgXHJcbiAgICAgIHByb3h5X2lkOiBwcm94eUlkLCBcclxuICAgICAgdXNlcl9maW5nZXJwcmludDogeyAkaW46IHBhcnRpY2lwYW50RmluZ2VycHJpbnRzIH1cclxuICAgIH0sXHJcbiAgICB7IFxyXG4gICAgICAkc2V0OiB7IFxyXG4gICAgICAgIGdyb3VwX3Nlc3Npb25faWQ6IGdyb3VwU2Vzc2lvbklkLFxyXG4gICAgICAgIHN0YXR1czogJ3JlZGlyZWN0ZWQnLFxyXG4gICAgICAgIHJlZGlyZWN0ZWRfYXQ6IG5ldyBEYXRlKClcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICk7XHJcbiAgXHJcbiAgY29uc29sZS5sb2coJ0dyb3VwIHNlc3Npb24gdXBkYXRlIHJlc3VsdDonLCB7XHJcbiAgICBtYXRjaGVkQ291bnQ6IHVwZGF0ZVJlc3VsdC5tYXRjaGVkQ291bnQsXHJcbiAgICBtb2RpZmllZENvdW50OiB1cGRhdGVSZXN1bHQubW9kaWZpZWRDb3VudCxcclxuICAgIGdyb3VwU2Vzc2lvbklkXHJcbiAgfSk7XHJcbiAgXHJcbiAgLy8gTWFyayB0aGUgcHJveHkgbGluayBhcyB1c2VkL2NvbXBsZXRlZCB3aGVuIGFsbCBwYXJ0aWNpcGFudHMgYXJlIHJlZGlyZWN0ZWRcclxuICBhd2FpdCBkYXRhYmFzZS5jb2xsZWN0aW9uKCdwcm94eV9saW5rcycpLnVwZGF0ZU9uZShcclxuICAgIHsgcHJveHlfaWQ6IHByb3h5SWQgfSxcclxuICAgIHsgXHJcbiAgICAgICRzZXQ6IHsgXHJcbiAgICAgICAgc3RhdHVzOiAndXNlZCcsXHJcbiAgICAgICAgY29tcGxldGVkX2F0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIGN1cnJlbnRfdXNlczogcGFydGljaXBhbnRGaW5nZXJwcmludHMubGVuZ3RoXHJcbiAgICAgIH1cclxuICAgIH1cclxuICApO1xyXG4gIFxyXG4gIHJldHVybiBncm91cFNlc3Npb25JZDtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZ2V0R3JvdXBTdGF0dXMocHJveHlJZCkge1xyXG4gIGNvbnN0IGRhdGFiYXNlID0gYXdhaXQgY29ubmVjdFRvRGF0YWJhc2UoKTtcclxuICBjb25zdCBsaW5rID0gYXdhaXQgZGF0YWJhc2UuY29sbGVjdGlvbigncHJveHlfbGlua3MnKS5maW5kT25lKHsgcHJveHlfaWQ6IHByb3h5SWQgfSk7XHJcbiAgaWYgKCFsaW5rKSByZXR1cm4gbnVsbDtcclxuICBcclxuICBjb25zdCB3YWl0aW5nUGFydGljaXBhbnRzID0gYXdhaXQgZ2V0V2FpdGluZ1BhcnRpY2lwYW50cyhwcm94eUlkKTtcclxuICBjb25zdCBhbGxQYXJ0aWNpcGFudHMgPSBhd2FpdCBkYXRhYmFzZS5jb2xsZWN0aW9uKCdsaW5rX3VzYWdlJykuZmluZCh7IHByb3h5X2lkOiBwcm94eUlkIH0pLnRvQXJyYXkoKTtcclxuICBjb25zdCByZWRpcmVjdGVkUGFydGljaXBhbnRzID0gYWxsUGFydGljaXBhbnRzLmZpbHRlcihwID0+IHAuc3RhdHVzID09PSAncmVkaXJlY3RlZCcpO1xyXG4gIGNvbnN0IGV4cGlyZWRQYXJ0aWNpcGFudHMgPSBhbGxQYXJ0aWNpcGFudHMuZmlsdGVyKHAgPT4gcC5zdGF0dXMgPT09ICdleHBpcmVkJyk7XHJcbiAgXHJcbiAgY29uc3QgdG90YWxKb2luZWQgPSBhbGxQYXJ0aWNpcGFudHMubGVuZ3RoO1xyXG4gIGNvbnN0IGlzR3JvdXBDb21wbGV0ZSA9IHRvdGFsSm9pbmVkID49IGxpbmsubWF4X3VzZXM7XHJcbiAgY29uc3QgaGFzUmVkaXJlY3RlZEdyb3VwID0gcmVkaXJlY3RlZFBhcnRpY2lwYW50cy5sZW5ndGggPiAwO1xyXG4gIGNvbnN0IGlzRXhwaXJlZCA9IGxpbmsucm9vbV9leHBpcmVkIHx8IGxpbmsuc3RhdHVzID09PSAnZXhwaXJlZCc7XHJcbiAgXHJcbiAgcmV0dXJuIHtcclxuICAgIHByb3h5X2lkOiBwcm94eUlkLFxyXG4gICAgZ3JvdXBfbmFtZTogbGluay5ncm91cF9uYW1lLFxyXG4gICAgY2F0ZWdvcnk6IGxpbmsuY2F0ZWdvcnksXHJcbiAgICB0cmVhdG1lbnRfdGl0bGU6IGxpbmsudHJlYXRtZW50X3RpdGxlLFxyXG4gICAgbWF4X3VzZXM6IGxpbmsubWF4X3VzZXMsXHJcbiAgICBjdXJyZW50X3dhaXRpbmc6IHdhaXRpbmdQYXJ0aWNpcGFudHMubGVuZ3RoLFxyXG4gICAgdG90YWxfam9pbmVkOiB0b3RhbEpvaW5lZCxcclxuICAgIGlzX2Z1bGw6IGlzR3JvdXBDb21wbGV0ZSxcclxuICAgIGhhc19yZWRpcmVjdGVkX2dyb3VwOiBoYXNSZWRpcmVjdGVkR3JvdXAsXHJcbiAgICBpc19leHBpcmVkOiBpc0V4cGlyZWQsXHJcbiAgICByb29tX3N0YXJ0X3RpbWU6IGxpbmsucm9vbV9zdGFydF90aW1lLFxyXG4gICAgd2FpdGluZ19wYXJ0aWNpcGFudHM6IHdhaXRpbmdQYXJ0aWNpcGFudHMubWFwKHAgPT4gKHtcclxuICAgICAgcGFydGljaXBhbnRfbnVtYmVyOiBwLnBhcnRpY2lwYW50X251bWJlcixcclxuICAgICAgam9pbmVkX2F0OiBwLmpvaW5lZF9hdCxcclxuICAgICAgZmluZ2VycHJpbnQ6IHAudXNlcl9maW5nZXJwcmludC5zdWJzdHJpbmcoMCwgOCkgKyAnLi4uJyAvLyBQYXJ0aWFsIGZvciBwcml2YWN5XHJcbiAgICB9KSksXHJcbiAgICByZWRpcmVjdGVkX3BhcnRpY2lwYW50czogcmVkaXJlY3RlZFBhcnRpY2lwYW50cy5tYXAocCA9PiAoe1xyXG4gICAgICBwYXJ0aWNpcGFudF9udW1iZXI6IHAucGFydGljaXBhbnRfbnVtYmVyLFxyXG4gICAgICByZWRpcmVjdGVkX2F0OiBwLnJlZGlyZWN0ZWRfYXQsXHJcbiAgICAgIGdyb3VwX3Nlc3Npb25faWQ6IHAuZ3JvdXBfc2Vzc2lvbl9pZFxyXG4gICAgfSkpLFxyXG4gICAgZXhwaXJlZF9wYXJ0aWNpcGFudHM6IGV4cGlyZWRQYXJ0aWNpcGFudHMubWFwKHAgPT4gKHtcclxuICAgICAgcGFydGljaXBhbnRfbnVtYmVyOiBwLnBhcnRpY2lwYW50X251bWJlcixcclxuICAgICAgam9pbmVkX2F0OiBwLmpvaW5lZF9hdCxcclxuICAgICAgZmluZ2VycHJpbnQ6IHAudXNlcl9maW5nZXJwcmludC5zdWJzdHJpbmcoMCwgOCkgKyAnLi4uJ1xyXG4gICAgfSkpLFxyXG4gICAgcmVhbF91cmw6IGxpbmsucmVhbF91cmxcclxuICB9O1xyXG59XHJcblxyXG4vLyBSb29tIHRpbWluZyBmdW5jdGlvbnNcclxuYXN5bmMgZnVuY3Rpb24gc2V0Um9vbVN0YXJ0VGltZShwcm94eUlkKSB7XHJcbiAgY29uc3QgZGF0YWJhc2UgPSBhd2FpdCBjb25uZWN0VG9EYXRhYmFzZSgpO1xyXG4gIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgcmV0dXJuIGF3YWl0IGRhdGFiYXNlLmNvbGxlY3Rpb24oJ3Byb3h5X2xpbmtzJykudXBkYXRlT25lKFxyXG4gICAgeyBwcm94eV9pZDogcHJveHlJZCwgcm9vbV9zdGFydF90aW1lOiBudWxsIH0sIC8vIE9ubHkgc2V0IGlmIG5vdCBhbHJlYWR5IHNldFxyXG4gICAgeyAkc2V0OiB7IHJvb21fc3RhcnRfdGltZTogbm93IH0gfVxyXG4gICk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGV4cGlyZVJvb20ocHJveHlJZCkge1xyXG4gIGNvbnN0IGRhdGFiYXNlID0gYXdhaXQgY29ubmVjdFRvRGF0YWJhc2UoKTtcclxuICBcclxuICAvLyBNYXJrIHJvb20gYXMgZXhwaXJlZFxyXG4gIGF3YWl0IGRhdGFiYXNlLmNvbGxlY3Rpb24oJ3Byb3h5X2xpbmtzJykudXBkYXRlT25lKFxyXG4gICAgeyBwcm94eV9pZDogcHJveHlJZCB9LFxyXG4gICAgeyBcclxuICAgICAgJHNldDogeyBcclxuICAgICAgICByb29tX2V4cGlyZWQ6IHRydWUsXHJcbiAgICAgICAgaXNfYWN0aXZlOiBmYWxzZSxcclxuICAgICAgICBzdGF0dXM6ICdleHBpcmVkJyxcclxuICAgICAgICBjb21wbGV0ZWRfYXQ6IG5ldyBEYXRlKClcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICk7XHJcbiAgXHJcbiAgLy8gVXBkYXRlIGFsbCB3YWl0aW5nIHBhcnRpY2lwYW50cyB0byBleHBpcmVkIHN0YXR1c1xyXG4gIHJldHVybiBhd2FpdCBkYXRhYmFzZS5jb2xsZWN0aW9uKCdsaW5rX3VzYWdlJykudXBkYXRlTWFueShcclxuICAgIHsgcHJveHlfaWQ6IHByb3h5SWQsIHN0YXR1czogJ3dhaXRpbmcnIH0sXHJcbiAgICB7ICRzZXQ6IHsgc3RhdHVzOiAnZXhwaXJlZCcgfSB9XHJcbiAgKTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gY2hlY2tSb29tRXhwaXJhdGlvbihwcm94eUlkKSB7XHJcbiAgY29uc3QgZGF0YWJhc2UgPSBhd2FpdCBjb25uZWN0VG9EYXRhYmFzZSgpO1xyXG4gIGNvbnN0IGxpbmsgPSBhd2FpdCBkYXRhYmFzZS5jb2xsZWN0aW9uKCdwcm94eV9saW5rcycpLmZpbmRPbmUoeyBwcm94eV9pZDogcHJveHlJZCB9KTtcclxuICBcclxuICBpZiAoIWxpbmsgfHwgIWxpbmsucm9vbV9zdGFydF90aW1lIHx8IGxpbmsucm9vbV9leHBpcmVkKSB7XHJcbiAgICByZXR1cm4geyBleHBpcmVkOiBsaW5rPy5yb29tX2V4cGlyZWQgfHwgZmFsc2UsIHRpbWVMZWZ0OiAwIH07XHJcbiAgfVxyXG4gIFxyXG4gIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgY29uc3QgZWxhcHNlZCA9IE1hdGguZmxvb3IoKG5vdyAtIGxpbmsucm9vbV9zdGFydF90aW1lKSAvIDEwMDApO1xyXG4gIGNvbnN0IHRpbWVMZWZ0ID0gTWF0aC5tYXgoMCwgNjAwIC0gZWxhcHNlZCk7IC8vIDEwIG1pbnV0ZXMgPSA2MDAgc2Vjb25kc1xyXG4gIFxyXG4gIGlmICh0aW1lTGVmdCA8PSAwICYmICFsaW5rLnJvb21fZXhwaXJlZCkge1xyXG4gICAgLy8gUm9vbSBoYXMgZXhwaXJlZCwgbWFyayBpdFxyXG4gICAgYXdhaXQgZXhwaXJlUm9vbShwcm94eUlkKTtcclxuICAgIHJldHVybiB7IGV4cGlyZWQ6IHRydWUsIHRpbWVMZWZ0OiAwIH07XHJcbiAgfVxyXG4gIFxyXG4gIHJldHVybiB7IGV4cGlyZWQ6IGZhbHNlLCB0aW1lTGVmdCwgcm9vbVN0YXJ0VGltZTogbGluay5yb29tX3N0YXJ0X3RpbWUuZ2V0VGltZSgpIH07XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGdldFByb3h5U3RhdHMoKSB7XHJcbiAgY29uc3QgZGF0YWJhc2UgPSBhd2FpdCBjb25uZWN0VG9EYXRhYmFzZSgpO1xyXG4gIGNvbnN0IGxpbmtzID0gYXdhaXQgZGF0YWJhc2UuY29sbGVjdGlvbigncHJveHlfbGlua3MnKS5maW5kKHt9KS50b0FycmF5KCk7XHJcbiAgXHJcbiAgY29uc3QgdG90YWwgPSBsaW5rcy5sZW5ndGg7XHJcbiAgY29uc3QgYWN0aXZlID0gbGlua3MuZmlsdGVyKGxpbmsgPT4gbGluay5pc19hY3RpdmUgIT09IGZhbHNlICYmIGxpbmsuc3RhdHVzICE9PSAndXNlZCcgJiYgbGluay5zdGF0dXMgIT09ICdleHBpcmVkJykubGVuZ3RoO1xyXG4gIGNvbnN0IHBhcnRpY2lwYW50cyA9IGxpbmtzLnJlZHVjZSgoc3VtLCBsaW5rKSA9PiBzdW0gKyAobGluay5jdXJyZW50X3VzZXMgfHwgMCksIDApO1xyXG4gIGNvbnN0IGZ1bGwgPSBsaW5rcy5maWx0ZXIobGluayA9PiAobGluay5jdXJyZW50X3VzZXMgfHwgMCkgPj0gKGxpbmsubWF4X3VzZXMgfHwgMykpLmxlbmd0aDtcclxuICBjb25zdCB1c2VkID0gbGlua3MuZmlsdGVyKGxpbmsgPT4gbGluay5zdGF0dXMgPT09ICd1c2VkJykubGVuZ3RoO1xyXG4gIGNvbnN0IGV4cGlyZWQgPSBsaW5rcy5maWx0ZXIobGluayA9PiBsaW5rLnN0YXR1cyA9PT0gJ2V4cGlyZWQnKS5sZW5ndGg7XHJcblxyXG4gIHJldHVybiB7IHRvdGFsLCBhY3RpdmUsIHBhcnRpY2lwYW50cywgZnVsbCwgdXNlZCwgZXhwaXJlZCB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICBjb25uZWN0VG9EYXRhYmFzZSxcclxuICBmaW5kQWRtaW4sXHJcbiAgZmluZEFkbWluV2l0aFBhc3N3b3JkLFxyXG4gIGdldEFsbEFkbWlucyxcclxuICBjcmVhdGVBZG1pbixcclxuICBnZXRBbGxQcm94eUxpbmtzLFxyXG4gIGdldFByb3h5TGluayxcclxuICBnZXRBY3RpdmVQcm94eUxpbmssXHJcbiAgY3JlYXRlUHJveHlMaW5rLFxyXG4gIHVwZGF0ZVByb3h5TGlua1N0YXR1cyxcclxuICBpbmNyZW1lbnRQcm94eUxpbmtVc2FnZSxcclxuICByZXNldFByb3h5TGlua1VzYWdlLFxyXG4gIGRlbGV0ZVByb3h5TGluayxcclxuICBjaGVja0xpbmtVc2FnZSxcclxuICByZWNvcmRMaW5rVXNhZ2UsXHJcbiAgZ2V0UHJveHlTdGF0cyxcclxuICAvLyBOZXcgZ3JvdXAgbWFuYWdlbWVudCBmdW5jdGlvbnNcclxuICBnZXRXYWl0aW5nUGFydGljaXBhbnRzLFxyXG4gIHVwZGF0ZVBhcnRpY2lwYW50U3RhdHVzLFxyXG4gIGNyZWF0ZUdyb3VwU2Vzc2lvbixcclxuICBnZXRHcm91cFN0YXR1cyxcclxuICAvLyBSb29tIHRpbWluZyBmdW5jdGlvbnNcclxuICBzZXRSb29tU3RhcnRUaW1lLFxyXG4gIGV4cGlyZVJvb20sXHJcbiAgY2hlY2tSb29tRXhwaXJhdGlvbixcclxuICBnZXRBbGxQYXJ0aWNpcGFudHNcclxufTsiXSwibmFtZXMiOlsiTW9uZ29DbGllbnQiLCJTZXJ2ZXJBcGlWZXJzaW9uIiwicmVxdWlyZSIsImNsaWVudCIsImRiIiwiaXNDb25uZWN0ZWQiLCJjb25uZWN0VG9EYXRhYmFzZSIsInByb2Nlc3MiLCJlbnYiLCJEQVRBQkFTRV9VUkwiLCJFcnJvciIsImNvbnNvbGUiLCJsb2ciLCJzZXJ2ZXJBcGkiLCJ2ZXJzaW9uIiwidjEiLCJzdHJpY3QiLCJkZXByZWNhdGlvbkVycm9ycyIsImNvbm5lY3QiLCJjb21tYW5kIiwicGluZyIsImNyZWF0ZUluZGV4ZXMiLCJlcnJvciIsImNvbGxlY3Rpb24iLCJjcmVhdGVJbmRleCIsInVzZXJuYW1lIiwidW5pcXVlIiwicHJveHlfaWQiLCJ1c2VyX2ZpbmdlcnByaW50IiwibWVzc2FnZSIsImZpbmRBZG1pbiIsImRhdGFiYXNlIiwiZmluZE9uZSIsImZpbmRBZG1pbldpdGhQYXNzd29yZCIsInBhc3N3b3JkIiwiZ2V0QWxsQWRtaW5zIiwiZmluZCIsInRvQXJyYXkiLCJjcmVhdGVBZG1pbiIsImluc2VydE9uZSIsImNyZWF0ZWRfYXQiLCJEYXRlIiwiZ2V0QWxsUHJveHlMaW5rcyIsImxpbmtzIiwic29ydCIsIm1hcCIsImxpbmsiLCJpbmRleCIsImlkIiwiX2lkIiwidG9TdHJpbmciLCJyZWFsX3VybCIsImdyb3VwX25hbWUiLCJjYXRlZ29yeSIsInRyZWF0bWVudF90aXRsZSIsIm1heF91c2VzIiwiY3VycmVudF91c2VzIiwiaXNfYWN0aXZlIiwic3RhdHVzIiwiY29tcGxldGVkX2F0IiwidG9JU09TdHJpbmciLCJjcmVhdGVkX2J5IiwiZ2V0UHJveHlMaW5rIiwicHJveHlJZCIsImdldEFjdGl2ZVByb3h5TGluayIsIiRuZSIsImNyZWF0ZVByb3h5TGluayIsInJlYWxVcmwiLCJncm91cE5hbWUiLCJtYXhVc2VzIiwidHJlYXRtZW50VGl0bGUiLCJyb29tX3N0YXJ0X3RpbWUiLCJyb29tX2V4cGlyZWQiLCJ1cGRhdGVQcm94eUxpbmtTdGF0dXMiLCJpc0FjdGl2ZSIsInVwZGF0ZU9uZSIsIiRzZXQiLCJpbmNyZW1lbnRQcm94eUxpbmtVc2FnZSIsIiRpbmMiLCJyZXNldFByb3h5TGlua1VzYWdlIiwiZGVsZXRlTWFueSIsImRlbGV0ZVByb3h5TGluayIsImRlbGV0ZU9uZSIsImNoZWNrTGlua1VzYWdlIiwidXNlckZpbmdlcnByaW50IiwicmVjb3JkTGlua1VzYWdlIiwic2Vzc2lvbklkIiwidXNlcklwIiwicGFydGljaXBhbnROdW1iZXIiLCJzZXNzaW9uX2lkIiwidXNlcl9pcCIsInBhcnRpY2lwYW50X251bWJlciIsImdyb3VwX3Nlc3Npb25faWQiLCJqb2luZWRfYXQiLCJyZWRpcmVjdGVkX2F0IiwidXNlZF9hdCIsImdldFdhaXRpbmdQYXJ0aWNpcGFudHMiLCJnZXRBbGxQYXJ0aWNpcGFudHMiLCJ1cGRhdGVQYXJ0aWNpcGFudFN0YXR1cyIsImdyb3VwU2Vzc2lvbklkIiwidXBkYXRlRGF0YSIsImNyZWF0ZUdyb3VwU2Vzc2lvbiIsInBhcnRpY2lwYW50RmluZ2VycHJpbnRzIiwicmFuZG9tQnl0ZXMiLCJmcCIsInN1YnN0cmluZyIsInVwZGF0ZVJlc3VsdCIsInVwZGF0ZU1hbnkiLCIkaW4iLCJtYXRjaGVkQ291bnQiLCJtb2RpZmllZENvdW50IiwibGVuZ3RoIiwiZ2V0R3JvdXBTdGF0dXMiLCJ3YWl0aW5nUGFydGljaXBhbnRzIiwiYWxsUGFydGljaXBhbnRzIiwicmVkaXJlY3RlZFBhcnRpY2lwYW50cyIsImZpbHRlciIsInAiLCJleHBpcmVkUGFydGljaXBhbnRzIiwidG90YWxKb2luZWQiLCJpc0dyb3VwQ29tcGxldGUiLCJoYXNSZWRpcmVjdGVkR3JvdXAiLCJpc0V4cGlyZWQiLCJjdXJyZW50X3dhaXRpbmciLCJ0b3RhbF9qb2luZWQiLCJpc19mdWxsIiwiaGFzX3JlZGlyZWN0ZWRfZ3JvdXAiLCJpc19leHBpcmVkIiwid2FpdGluZ19wYXJ0aWNpcGFudHMiLCJmaW5nZXJwcmludCIsInJlZGlyZWN0ZWRfcGFydGljaXBhbnRzIiwiZXhwaXJlZF9wYXJ0aWNpcGFudHMiLCJzZXRSb29tU3RhcnRUaW1lIiwibm93IiwiZXhwaXJlUm9vbSIsImNoZWNrUm9vbUV4cGlyYXRpb24iLCJleHBpcmVkIiwidGltZUxlZnQiLCJlbGFwc2VkIiwiTWF0aCIsImZsb29yIiwibWF4Iiwicm9vbVN0YXJ0VGltZSIsImdldFRpbWUiLCJnZXRQcm94eVN0YXRzIiwidG90YWwiLCJhY3RpdmUiLCJwYXJ0aWNpcGFudHMiLCJyZWR1Y2UiLCJzdW0iLCJmdWxsIiwidXNlZCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/database.js\n");

/***/ }),

/***/ "(api)/./lib/utils-server.js":
/*!*****************************!*\
  !*** ./lib/utils-server.js ***!
  \*****************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("// Server-side utility functions for Next.js\n\nconst crypto = __webpack_require__(/*! crypto */ \"crypto\");\nfunction generateProxyId() {\n    return crypto.randomBytes(8).toString(\"hex\");\n}\nfunction isValidUrl(string) {\n    try {\n        const url = new URL(string);\n        return url.protocol === \"http:\" || url.protocol === \"https:\";\n    } catch (_) {\n        return false;\n    }\n}\nfunction sanitizeInput(input) {\n    if (!input || typeof input !== \"string\") return \"\";\n    return input.trim().replace(/[<>]/g, \"\");\n}\nfunction logActivity(action, details = {}) {\n    const timestamp = new Date().toISOString();\n    console.log(`[${timestamp}] ${action}:`, details);\n// In a production app, you might want to store this in the database\n// For now, we'll just log to console\n}\nfunction generateFingerprint() {\n    // Generate a simple browser fingerprint\n    return crypto.randomBytes(16).toString(\"hex\");\n}\nfunction getClientIP(req) {\n    return req.headers[\"x-forwarded-for\"] || req.headers[\"x-real-ip\"] || req.connection?.remoteAddress || \"unknown\";\n}\nmodule.exports = {\n    generateProxyId,\n    isValidUrl,\n    sanitizeInput,\n    logActivity,\n    generateFingerprint,\n    getClientIP\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvdXRpbHMtc2VydmVyLmpzIiwibWFwcGluZ3MiOiJBQUFBLDRDQUE0Qzs7QUFDNUMsTUFBTUEsU0FBU0MsbUJBQU9BLENBQUM7QUFFdkIsU0FBU0M7SUFDUCxPQUFPRixPQUFPRyxXQUFXLENBQUMsR0FBR0MsUUFBUSxDQUFDO0FBQ3hDO0FBRUEsU0FBU0MsV0FBV0MsTUFBTTtJQUN4QixJQUFJO1FBQ0YsTUFBTUMsTUFBTSxJQUFJQyxJQUFJRjtRQUNwQixPQUFPQyxJQUFJRSxRQUFRLEtBQUssV0FBV0YsSUFBSUUsUUFBUSxLQUFLO0lBQ3RELEVBQUUsT0FBT0MsR0FBRztRQUNWLE9BQU87SUFDVDtBQUNGO0FBRUEsU0FBU0MsY0FBY0MsS0FBSztJQUMxQixJQUFJLENBQUNBLFNBQVMsT0FBT0EsVUFBVSxVQUFVLE9BQU87SUFDaEQsT0FBT0EsTUFBTUMsSUFBSSxHQUFHQyxPQUFPLENBQUMsU0FBUztBQUN2QztBQUVBLFNBQVNDLFlBQVlDLE1BQU0sRUFBRUMsVUFBVSxDQUFDLENBQUM7SUFDdkMsTUFBTUMsWUFBWSxJQUFJQyxPQUFPQyxXQUFXO0lBQ3hDQyxRQUFRQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUVKLFVBQVUsRUFBRSxFQUFFRixPQUFPLENBQUMsQ0FBQyxFQUFFQztBQUV6QyxvRUFBb0U7QUFDcEUscUNBQXFDO0FBQ3ZDO0FBRUEsU0FBU007SUFDUCx3Q0FBd0M7SUFDeEMsT0FBT3ZCLE9BQU9HLFdBQVcsQ0FBQyxJQUFJQyxRQUFRLENBQUM7QUFDekM7QUFFQSxTQUFTb0IsWUFBWUMsR0FBRztJQUN0QixPQUFPQSxJQUFJQyxPQUFPLENBQUMsa0JBQWtCLElBQzlCRCxJQUFJQyxPQUFPLENBQUMsWUFBWSxJQUN4QkQsSUFBSUUsVUFBVSxFQUFFQyxpQkFDaEI7QUFDVDtBQUVBQyxPQUFPQyxPQUFPLEdBQUc7SUFDZjVCO0lBQ0FHO0lBQ0FNO0lBQ0FJO0lBQ0FRO0lBQ0FDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vdHJlZS1wcm94eS1zZXJ2ZXIvLi9saWIvdXRpbHMtc2VydmVyLmpzP2MzNjQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gU2VydmVyLXNpZGUgdXRpbGl0eSBmdW5jdGlvbnMgZm9yIE5leHQuanNcclxuY29uc3QgY3J5cHRvID0gcmVxdWlyZSgnY3J5cHRvJyk7XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZVByb3h5SWQoKSB7XHJcbiAgcmV0dXJuIGNyeXB0by5yYW5kb21CeXRlcyg4KS50b1N0cmluZygnaGV4Jyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGlzVmFsaWRVcmwoc3RyaW5nKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoc3RyaW5nKTtcclxuICAgIHJldHVybiB1cmwucHJvdG9jb2wgPT09ICdodHRwOicgfHwgdXJsLnByb3RvY29sID09PSAnaHR0cHM6JztcclxuICB9IGNhdGNoIChfKSB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBzYW5pdGl6ZUlucHV0KGlucHV0KSB7XHJcbiAgaWYgKCFpbnB1dCB8fCB0eXBlb2YgaW5wdXQgIT09ICdzdHJpbmcnKSByZXR1cm4gJyc7XHJcbiAgcmV0dXJuIGlucHV0LnRyaW0oKS5yZXBsYWNlKC9bPD5dL2csICcnKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbG9nQWN0aXZpdHkoYWN0aW9uLCBkZXRhaWxzID0ge30pIHtcclxuICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XHJcbiAgY29uc29sZS5sb2coYFske3RpbWVzdGFtcH1dICR7YWN0aW9ufTpgLCBkZXRhaWxzKTtcclxuICBcclxuICAvLyBJbiBhIHByb2R1Y3Rpb24gYXBwLCB5b3UgbWlnaHQgd2FudCB0byBzdG9yZSB0aGlzIGluIHRoZSBkYXRhYmFzZVxyXG4gIC8vIEZvciBub3csIHdlJ2xsIGp1c3QgbG9nIHRvIGNvbnNvbGVcclxufVxyXG5cclxuZnVuY3Rpb24gZ2VuZXJhdGVGaW5nZXJwcmludCgpIHtcclxuICAvLyBHZW5lcmF0ZSBhIHNpbXBsZSBicm93c2VyIGZpbmdlcnByaW50XHJcbiAgcmV0dXJuIGNyeXB0by5yYW5kb21CeXRlcygxNikudG9TdHJpbmcoJ2hleCcpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRDbGllbnRJUChyZXEpIHtcclxuICByZXR1cm4gcmVxLmhlYWRlcnNbJ3gtZm9yd2FyZGVkLWZvciddIHx8IFxyXG4gICAgICAgICByZXEuaGVhZGVyc1sneC1yZWFsLWlwJ10gfHwgXHJcbiAgICAgICAgIHJlcS5jb25uZWN0aW9uPy5yZW1vdGVBZGRyZXNzIHx8IFxyXG4gICAgICAgICAndW5rbm93bic7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gIGdlbmVyYXRlUHJveHlJZCxcclxuICBpc1ZhbGlkVXJsLFxyXG4gIHNhbml0aXplSW5wdXQsXHJcbiAgbG9nQWN0aXZpdHksXHJcbiAgZ2VuZXJhdGVGaW5nZXJwcmludCxcclxuICBnZXRDbGllbnRJUFxyXG59OyJdLCJuYW1lcyI6WyJjcnlwdG8iLCJyZXF1aXJlIiwiZ2VuZXJhdGVQcm94eUlkIiwicmFuZG9tQnl0ZXMiLCJ0b1N0cmluZyIsImlzVmFsaWRVcmwiLCJzdHJpbmciLCJ1cmwiLCJVUkwiLCJwcm90b2NvbCIsIl8iLCJzYW5pdGl6ZUlucHV0IiwiaW5wdXQiLCJ0cmltIiwicmVwbGFjZSIsImxvZ0FjdGl2aXR5IiwiYWN0aW9uIiwiZGV0YWlscyIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImNvbnNvbGUiLCJsb2ciLCJnZW5lcmF0ZUZpbmdlcnByaW50IiwiZ2V0Q2xpZW50SVAiLCJyZXEiLCJoZWFkZXJzIiwiY29ubmVjdGlvbiIsInJlbW90ZUFkZHJlc3MiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/utils-server.js\n");

/***/ }),

/***/ "(api)/./pages/api/proxy/[id]/status.js":
/*!****************************************!*\
  !*** ./pages/api/proxy/[id]/status.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n// Get group status API route for Next.js\nconst { getGroupStatus, checkLinkUsage, checkRoomExpiration } = __webpack_require__(/*! ../../../../lib/database */ \"(api)/./lib/database.js\");\nconst { logActivity } = __webpack_require__(/*! ../../../../lib/utils-server */ \"(api)/./lib/utils-server.js\");\nasync function handler(req, res) {\n    if (req.method !== \"GET\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    const { id: proxyId } = req.query;\n    const { fingerprint } = req.query;\n    try {\n        // Check room expiration first\n        const roomStatus = await checkRoomExpiration(proxyId);\n        // Get overall group status\n        const groupStatus = await getGroupStatus(proxyId);\n        if (!groupStatus) {\n            return res.status(404).json({\n                error: \"Link not found or inactive\"\n            });\n        }\n        let userStatus = null;\n        if (fingerprint) {\n            // Get specific user's status\n            const userUsage = await checkLinkUsage(proxyId, fingerprint);\n            if (userUsage) {\n                userStatus = {\n                    status: userUsage.status,\n                    participantNumber: userUsage.participant_number,\n                    groupSessionId: userUsage.group_session_id,\n                    joinedAt: userUsage.joined_at,\n                    redirectedAt: userUsage.redirected_at\n                };\n                // If group is complete but user status is still waiting, something went wrong\n                if (groupStatus.has_redirected_group && userUsage.status === \"waiting\") {\n                    console.log(\"Warning: User still waiting but group has redirected participants\");\n                    console.log(\"User fingerprint:\", fingerprint.substring(0, 8) + \"...\");\n                    console.log(\"User status:\", userUsage.status);\n                    console.log(\"Group status:\", groupStatus);\n                }\n            }\n        }\n        return res.json({\n            ...groupStatus,\n            userStatus: userStatus,\n            roomStartTime: roomStatus.roomStartTime || null,\n            roomExpired: roomStatus.expired,\n            timeLeft: roomStatus.timeLeft,\n            status: roomStatus.expired ? \"expired\" : groupStatus.status || \"waiting\",\n            timestamp: new Date().toISOString()\n        });\n    } catch (error) {\n        console.error(\"❌ Get group status error:\", error);\n        logActivity(\"Get group status error\", {\n            error: error.message,\n            proxyId\n        });\n        return res.status(500).json({\n            error: \"Internal server error\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvcHJveHkvW2lkXS9zdGF0dXMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLHlDQUF5QztBQUN6QyxNQUFNLEVBQUVBLGNBQWMsRUFBRUMsY0FBYyxFQUFFQyxtQkFBbUIsRUFBRSxHQUFHQyxtQkFBT0EsQ0FBQztBQUN4RSxNQUFNLEVBQUVDLFdBQVcsRUFBRSxHQUFHRCxtQkFBT0EsQ0FBQztBQUVqQixlQUFlRSxRQUFRQyxHQUFHLEVBQUVDLEdBQUc7SUFDNUMsSUFBSUQsSUFBSUUsTUFBTSxLQUFLLE9BQU87UUFDeEIsT0FBT0QsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQXFCO0lBQzVEO0lBRUEsTUFBTSxFQUFFQyxJQUFJQyxPQUFPLEVBQUUsR0FBR1AsSUFBSVEsS0FBSztJQUNqQyxNQUFNLEVBQUVDLFdBQVcsRUFBRSxHQUFHVCxJQUFJUSxLQUFLO0lBRWpDLElBQUk7UUFDRiw4QkFBOEI7UUFDOUIsTUFBTUUsYUFBYSxNQUFNZCxvQkFBb0JXO1FBRTdDLDJCQUEyQjtRQUMzQixNQUFNSSxjQUFjLE1BQU1qQixlQUFlYTtRQUV6QyxJQUFJLENBQUNJLGFBQWE7WUFDaEIsT0FBT1YsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFDMUJDLE9BQU87WUFDVDtRQUNGO1FBRUEsSUFBSU8sYUFBYTtRQUNqQixJQUFJSCxhQUFhO1lBQ2YsNkJBQTZCO1lBQzdCLE1BQU1JLFlBQVksTUFBTWxCLGVBQWVZLFNBQVNFO1lBQ2hELElBQUlJLFdBQVc7Z0JBQ2JELGFBQWE7b0JBQ1hULFFBQVFVLFVBQVVWLE1BQU07b0JBQ3hCVyxtQkFBbUJELFVBQVVFLGtCQUFrQjtvQkFDL0NDLGdCQUFnQkgsVUFBVUksZ0JBQWdCO29CQUMxQ0MsVUFBVUwsVUFBVU0sU0FBUztvQkFDN0JDLGNBQWNQLFVBQVVRLGFBQWE7Z0JBQ3ZDO2dCQUVBLDhFQUE4RTtnQkFDOUUsSUFBSVYsWUFBWVcsb0JBQW9CLElBQUlULFVBQVVWLE1BQU0sS0FBSyxXQUFXO29CQUN0RW9CLFFBQVFDLEdBQUcsQ0FBQztvQkFDWkQsUUFBUUMsR0FBRyxDQUFDLHFCQUFxQmYsWUFBWWdCLFNBQVMsQ0FBQyxHQUFHLEtBQUs7b0JBQy9ERixRQUFRQyxHQUFHLENBQUMsZ0JBQWdCWCxVQUFVVixNQUFNO29CQUM1Q29CLFFBQVFDLEdBQUcsQ0FBQyxpQkFBaUJiO2dCQUMvQjtZQUNGO1FBQ0Y7UUFFQSxPQUFPVixJQUFJRyxJQUFJLENBQUM7WUFDZCxHQUFHTyxXQUFXO1lBQ2RDLFlBQVlBO1lBQ1pjLGVBQWVoQixXQUFXZ0IsYUFBYSxJQUFJO1lBQzNDQyxhQUFhakIsV0FBV2tCLE9BQU87WUFDL0JDLFVBQVVuQixXQUFXbUIsUUFBUTtZQUM3QjFCLFFBQVFPLFdBQVdrQixPQUFPLEdBQUcsWUFBWWpCLFlBQVlSLE1BQU0sSUFBSTtZQUMvRDJCLFdBQVcsSUFBSUMsT0FBT0MsV0FBVztRQUNuQztJQUVGLEVBQUUsT0FBTzNCLE9BQU87UUFDZGtCLFFBQVFsQixLQUFLLENBQUMsNkJBQTZCQTtRQUMzQ1AsWUFBWSwwQkFBMEI7WUFBRU8sT0FBT0EsTUFBTTRCLE9BQU87WUFBRTFCO1FBQVE7UUFDdEUsT0FBT04sSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQXdCO0lBQy9EO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vdHJlZS1wcm94eS1zZXJ2ZXIvLi9wYWdlcy9hcGkvcHJveHkvW2lkXS9zdGF0dXMuanM/MjZhYSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBHZXQgZ3JvdXAgc3RhdHVzIEFQSSByb3V0ZSBmb3IgTmV4dC5qc1xyXG5jb25zdCB7IGdldEdyb3VwU3RhdHVzLCBjaGVja0xpbmtVc2FnZSwgY2hlY2tSb29tRXhwaXJhdGlvbiB9ID0gcmVxdWlyZSgnLi4vLi4vLi4vLi4vbGliL2RhdGFiYXNlJyk7XHJcbmNvbnN0IHsgbG9nQWN0aXZpdHkgfSA9IHJlcXVpcmUoJy4uLy4uLy4uLy4uL2xpYi91dGlscy1zZXJ2ZXInKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcclxuICBpZiAocmVxLm1ldGhvZCAhPT0gJ0dFVCcpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyB9KTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHsgaWQ6IHByb3h5SWQgfSA9IHJlcS5xdWVyeTtcclxuICBjb25zdCB7IGZpbmdlcnByaW50IH0gPSByZXEucXVlcnk7XHJcblxyXG4gIHRyeSB7XHJcbiAgICAvLyBDaGVjayByb29tIGV4cGlyYXRpb24gZmlyc3RcclxuICAgIGNvbnN0IHJvb21TdGF0dXMgPSBhd2FpdCBjaGVja1Jvb21FeHBpcmF0aW9uKHByb3h5SWQpO1xyXG4gICAgXHJcbiAgICAvLyBHZXQgb3ZlcmFsbCBncm91cCBzdGF0dXNcclxuICAgIGNvbnN0IGdyb3VwU3RhdHVzID0gYXdhaXQgZ2V0R3JvdXBTdGF0dXMocHJveHlJZCk7XHJcbiAgICBcclxuICAgIGlmICghZ3JvdXBTdGF0dXMpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgXHJcbiAgICAgICAgZXJyb3I6ICdMaW5rIG5vdCBmb3VuZCBvciBpbmFjdGl2ZSdcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHVzZXJTdGF0dXMgPSBudWxsO1xyXG4gICAgaWYgKGZpbmdlcnByaW50KSB7XHJcbiAgICAgIC8vIEdldCBzcGVjaWZpYyB1c2VyJ3Mgc3RhdHVzXHJcbiAgICAgIGNvbnN0IHVzZXJVc2FnZSA9IGF3YWl0IGNoZWNrTGlua1VzYWdlKHByb3h5SWQsIGZpbmdlcnByaW50KTtcclxuICAgICAgaWYgKHVzZXJVc2FnZSkge1xyXG4gICAgICAgIHVzZXJTdGF0dXMgPSB7XHJcbiAgICAgICAgICBzdGF0dXM6IHVzZXJVc2FnZS5zdGF0dXMsXHJcbiAgICAgICAgICBwYXJ0aWNpcGFudE51bWJlcjogdXNlclVzYWdlLnBhcnRpY2lwYW50X251bWJlcixcclxuICAgICAgICAgIGdyb3VwU2Vzc2lvbklkOiB1c2VyVXNhZ2UuZ3JvdXBfc2Vzc2lvbl9pZCxcclxuICAgICAgICAgIGpvaW5lZEF0OiB1c2VyVXNhZ2Uuam9pbmVkX2F0LFxyXG4gICAgICAgICAgcmVkaXJlY3RlZEF0OiB1c2VyVXNhZ2UucmVkaXJlY3RlZF9hdFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gSWYgZ3JvdXAgaXMgY29tcGxldGUgYnV0IHVzZXIgc3RhdHVzIGlzIHN0aWxsIHdhaXRpbmcsIHNvbWV0aGluZyB3ZW50IHdyb25nXHJcbiAgICAgICAgaWYgKGdyb3VwU3RhdHVzLmhhc19yZWRpcmVjdGVkX2dyb3VwICYmIHVzZXJVc2FnZS5zdGF0dXMgPT09ICd3YWl0aW5nJykge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ1dhcm5pbmc6IFVzZXIgc3RpbGwgd2FpdGluZyBidXQgZ3JvdXAgaGFzIHJlZGlyZWN0ZWQgcGFydGljaXBhbnRzJyk7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnVXNlciBmaW5nZXJwcmludDonLCBmaW5nZXJwcmludC5zdWJzdHJpbmcoMCwgOCkgKyAnLi4uJyk7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnVXNlciBzdGF0dXM6JywgdXNlclVzYWdlLnN0YXR1cyk7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnR3JvdXAgc3RhdHVzOicsIGdyb3VwU3RhdHVzKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzLmpzb24oe1xyXG4gICAgICAuLi5ncm91cFN0YXR1cyxcclxuICAgICAgdXNlclN0YXR1czogdXNlclN0YXR1cyxcclxuICAgICAgcm9vbVN0YXJ0VGltZTogcm9vbVN0YXR1cy5yb29tU3RhcnRUaW1lIHx8IG51bGwsXHJcbiAgICAgIHJvb21FeHBpcmVkOiByb29tU3RhdHVzLmV4cGlyZWQsXHJcbiAgICAgIHRpbWVMZWZ0OiByb29tU3RhdHVzLnRpbWVMZWZ0LFxyXG4gICAgICBzdGF0dXM6IHJvb21TdGF0dXMuZXhwaXJlZCA/ICdleHBpcmVkJyA6IGdyb3VwU3RhdHVzLnN0YXR1cyB8fCAnd2FpdGluZycsXHJcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICB9KTtcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBHZXQgZ3JvdXAgc3RhdHVzIGVycm9yOicsIGVycm9yKTtcclxuICAgIGxvZ0FjdGl2aXR5KCdHZXQgZ3JvdXAgc3RhdHVzIGVycm9yJywgeyBlcnJvcjogZXJyb3IubWVzc2FnZSwgcHJveHlJZCB9KTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9KTtcclxuICB9XHJcbn0iXSwibmFtZXMiOlsiZ2V0R3JvdXBTdGF0dXMiLCJjaGVja0xpbmtVc2FnZSIsImNoZWNrUm9vbUV4cGlyYXRpb24iLCJyZXF1aXJlIiwibG9nQWN0aXZpdHkiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwiaWQiLCJwcm94eUlkIiwicXVlcnkiLCJmaW5nZXJwcmludCIsInJvb21TdGF0dXMiLCJncm91cFN0YXR1cyIsInVzZXJTdGF0dXMiLCJ1c2VyVXNhZ2UiLCJwYXJ0aWNpcGFudE51bWJlciIsInBhcnRpY2lwYW50X251bWJlciIsImdyb3VwU2Vzc2lvbklkIiwiZ3JvdXBfc2Vzc2lvbl9pZCIsImpvaW5lZEF0Iiwiam9pbmVkX2F0IiwicmVkaXJlY3RlZEF0IiwicmVkaXJlY3RlZF9hdCIsImhhc19yZWRpcmVjdGVkX2dyb3VwIiwiY29uc29sZSIsImxvZyIsInN1YnN0cmluZyIsInJvb21TdGFydFRpbWUiLCJyb29tRXhwaXJlZCIsImV4cGlyZWQiLCJ0aW1lTGVmdCIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsIm1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/proxy/[id]/status.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fproxy%2F%5Bid%5D%2Fstatus&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cproxy%5C%5Bid%5D%5Cstatus.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();