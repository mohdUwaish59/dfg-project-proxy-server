(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{6840:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});let a=(0,t(5531).Z)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},3711:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});let a=(0,t(5531).Z)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},1310:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});let a=(0,t(5531).Z)("link-2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]])},3715:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});let a=(0,t(5531).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},4900:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});let a=(0,t(5531).Z)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]])},2527:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});let a=(0,t(5531).Z)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},7298:function(e,r,t){Promise.resolve().then(t.bind(t,574))},574:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return eo}});var a=t(7437),s=t(2265),n=t(5754),i=t(1657);function l(e){let{className:r,...t}=e;return(0,a.jsx)("div",{className:(0,i.cn)("animate-pulse rounded-md bg-primary/10",r),...t})}var c=t(1310),o=t(5531);let d=(0,o.Z)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var u=t(7815);let m=s.forwardRef((e,r)=>{let{className:t,type:s,...n}=e;return(0,a.jsx)("input",{type:s,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n})});m.displayName="Input";var x=t(9381),p=s.forwardRef((e,r)=>(0,a.jsx)(x.WV.label,{...e,ref:r,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));p.displayName="Label";let h=(0,t(6061).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),f=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(p,{ref:r,className:(0,i.cn)(h(),t),...s})});f.displayName=p.displayName;var g=t(7929);let y=(0,o.Z)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),v=(0,o.Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),j=(0,o.Z)("key-round",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);var b=t(3715);function N(e){let{onLoginSuccess:r}=e,[t,i]=(0,s.useState)({username:"",password:""}),[l,c]=(0,s.useState)(!1),[o,d]=(0,s.useState)(""),x=async e=>{e.preventDefault(),c(!0),d("");try{let e=await fetch("/api/admin/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(e.ok)r();else{let r=await e.json();d(r.error||"Login failed")}}catch(e){d("Network error. Please try again.")}finally{c(!1)}};return(0,a.jsx)("div",{className:"flex min-h-[60vh] items-center justify-center",children:(0,a.jsxs)(u.Zb,{className:"w-full max-w-md shadow-xl border-0 bg-white/95 backdrop-blur-sm",children:[(0,a.jsxs)(u.Ol,{className:"space-y-1 text-center",children:[(0,a.jsx)("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-gradient-to-r from-primary-600 to-accent-600",children:(0,a.jsx)(y,{className:"h-8 w-8 text-white"})}),(0,a.jsx)(u.ll,{className:"text-2xl font-bold text-gray-900",children:"Admin Access"}),(0,a.jsx)(u.SZ,{className:"text-gray-600",children:"Sign in to your admin account to manage experiment links"})]}),(0,a.jsx)(u.aY,{children:(0,a.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(f,{htmlFor:"username",className:"flex items-center gap-2",children:[(0,a.jsx)(v,{className:"h-4 w-4"}),"Username"]}),(0,a.jsx)(m,{id:"username",type:"text",placeholder:"Enter your username",value:t.username,onChange:e=>i({...t,username:e.target.value}),required:!0,disabled:l})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(f,{htmlFor:"password",className:"flex items-center gap-2",children:[(0,a.jsx)(j,{className:"h-4 w-4"}),"Password"]}),(0,a.jsx)(m,{id:"password",type:"password",placeholder:"Enter your password",value:t.password,onChange:e=>i({...t,password:e.target.value}),required:!0,disabled:l})]}),o&&(0,a.jsx)(g.bZ,{variant:"destructive",children:(0,a.jsx)(g.X,{children:o})}),(0,a.jsx)(n.z,{type:"submit",className:"w-full bg-gradient-to-r from-primary-600 to-primary-700 hover:from-primary-700 hover:to-primary-800",disabled:l,children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]})})]})})}var w=t(5750),k=t(6840),C=t(2527),Z=t(4530);let S=[{key:"total",label:"Total Groups",icon:w.Z,description:"All experiment groups"},{key:"active",label:"Active Groups",icon:k.Z,description:"Currently accepting participants"},{key:"participants",label:"Total Participants",icon:C.Z,description:"Across all experiments"},{key:"full",label:"Completed Groups",icon:Z.Z,description:"Reached capacity"}];function M(e){let{stats:r}=e;return(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:S.map((e,t)=>(0,a.jsxs)(u.Zb,{className:"transition-all hover:shadow-lg border-0 shadow-md bg-white/80 backdrop-blur-sm",children:[(0,a.jsxs)(u.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(u.ll,{className:"text-sm font-medium text-gray-600",children:e.label}),(0,a.jsx)("div",{className:"p-2 rounded-lg ".concat(["bg-primary-50","bg-success-50","bg-accent-50","bg-warning-50"][t%4]),children:(0,a.jsx)(e.icon,{className:"h-4 w-4 ".concat(["text-primary-600","text-success-600","text-accent-600","text-warning-600"][t%4])})})]}),(0,a.jsxs)(u.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold bg-gradient-to-r ".concat(["from-primary-500 to-primary-600","from-success-500 to-success-600","from-accent-500 to-accent-600","from-warning-500 to-warning-600"][t%4]," bg-clip-text text-transparent"),children:r[e.key]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]})]},e.key))})}var T=t(8338);let _=(0,o.Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),P=(0,o.Z)("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);function R(e){let{onLinkCreated:r}=e,[t,i]=(0,s.useState)({groupName:"",realUrl:""}),[l,c]=(0,s.useState)(!1),{showToast:o}=(0,T.useToast)(),d=async e=>{e.preventDefault(),c(!0);try{let e=await fetch("/api/admin/create-link",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(e.ok)o("success","Success","Experiment link created successfully!"),i({groupName:"",realUrl:""}),r();else{let r=await e.json();o("error","Error",r.error||"Failed to create link")}}catch(e){o("error","Error","Network error. Please try again.")}finally{c(!1)}};return(0,a.jsxs)(u.Zb,{className:"shadow-lg border-0 bg-white/80 backdrop-blur-sm",children:[(0,a.jsxs)(u.Ol,{children:[(0,a.jsxs)(u.ll,{className:"flex items-center gap-2 text-gray-900",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg bg-gradient-to-r from-primary-100 to-accent-100",children:(0,a.jsx)(_,{className:"h-5 w-5 text-primary-600"})}),"Create New Experiment Link"]}),(0,a.jsx)(u.SZ,{className:"text-gray-600",children:"Generate a secure proxy link for your oTree experiment"})]}),(0,a.jsx)(u.aY,{children:(0,a.jsxs)("form",{onSubmit:d,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(f,{htmlFor:"groupName",className:"flex items-center gap-2",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4"}),"Group Name"]}),(0,a.jsx)(m,{id:"groupName",type:"text",placeholder:"e.g., Group-1",value:t.groupName,onChange:e=>i({...t,groupName:e.target.value}),required:!0,disabled:l})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(f,{htmlFor:"realUrl",className:"flex items-center gap-2",children:[(0,a.jsx)(P,{className:"h-4 w-4"}),"oTree Experiment URL"]}),(0,a.jsx)(m,{id:"realUrl",type:"url",placeholder:"https://your-otree-server.com/room/...",value:t.realUrl,onChange:e=>i({...t,realUrl:e.target.value}),required:!0,disabled:l})]})]}),(0,a.jsx)(n.z,{type:"submit",disabled:l,className:"w-full md:w-auto bg-gradient-to-r from-success-600 to-success-700 hover:from-success-700 hover:to-success-800",children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_,{className:"mr-2 h-4 w-4"}),"Create Link"]})})]})})]})}var E=t(1478),z="Progress",[O,A]=function(e,r=[]){let t=[],n=()=>{let r=t.map(e=>s.createContext(e));return function(t){let a=t?.[e]||r;return s.useMemo(()=>({[`__scope${e}`]:{...t,[e]:a}}),[t,a])}};return n.scopeName=e,[function(r,n){let i=s.createContext(n),l=t.length;t=[...t,n];let c=r=>{let{scope:t,children:n,...c}=r,o=t?.[e]?.[l]||i,d=s.useMemo(()=>c,Object.values(c));return(0,a.jsx)(o.Provider,{value:d,children:n})};return c.displayName=r+"Provider",[c,function(t,a){let c=a?.[e]?.[l]||i,o=s.useContext(c);if(o)return o;if(void 0!==n)return n;throw Error(`\`${t}\` must be used within \`${r}\``)}]},function(...e){let r=e[0];if(1===e.length)return r;let t=()=>{let t=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let a=t.reduce((r,{useScope:t,scopeName:a})=>{let s=t(e)[`__scope${a}`];return{...r,...s}},{});return s.useMemo(()=>({[`__scope${r.scopeName}`]:a}),[a])}};return t.scopeName=r.scopeName,t}(n,...r)]}(z),[F,V]=O(z),L=s.forwardRef((e,r)=>{var t,s;let{__scopeProgress:n,value:i=null,max:l,getValueLabel:c=D,...o}=e;(l||0===l)&&!H(l)&&console.error((t=`${l}`,`Invalid prop \`max\` of value \`${t}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let d=H(l)?l:100;null===i||I(i,d)||console.error((s=`${i}`,`Invalid prop \`value\` of value \`${s}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let u=I(i,d)?i:null,m=U(u)?c(u,d):void 0;return(0,a.jsx)(F,{scope:n,value:u,max:d,children:(0,a.jsx)(x.WV.div,{"aria-valuemax":d,"aria-valuemin":0,"aria-valuenow":U(u)?u:void 0,"aria-valuetext":m,role:"progressbar","data-state":G(u,d),"data-value":u??void 0,"data-max":d,...o,ref:r})})});L.displayName=z;var q="ProgressIndicator",$=s.forwardRef((e,r)=>{let{__scopeProgress:t,...s}=e,n=V(q,t);return(0,a.jsx)(x.WV.div,{"data-state":G(n.value,n.max),"data-value":n.value??void 0,"data-max":n.max,...s,ref:r})});function D(e,r){return`${Math.round(e/r*100)}%`}function G(e,r){return null==e?"indeterminate":e===r?"complete":"loading"}function U(e){return"number"==typeof e}function H(e){return U(e)&&!isNaN(e)&&e>0}function I(e,r){return U(e)&&!isNaN(e)&&e<=r&&e>=0}$.displayName=q;let Y=s.forwardRef((e,r)=>{let{className:t,value:s,...n}=e;return(0,a.jsx)(L,{ref:r,className:(0,i.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",t),...n,children:(0,a.jsx)($,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(s||0),"%)")}})})});Y.displayName=L.displayName;let J=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:r,className:(0,i.cn)("w-full caption-bottom text-sm",t),...s})})});J.displayName="Table";let W=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("thead",{ref:r,className:(0,i.cn)("[&_tr]:border-b",t),...s})});W.displayName="TableHeader";let X=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("tbody",{ref:r,className:(0,i.cn)("[&_tr:last-child]:border-0",t),...s})});X.displayName="TableBody",s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("tfoot",{ref:r,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...s})}).displayName="TableFooter";let B=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("tr",{ref:r,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...s})});B.displayName="TableRow";let K=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("th",{ref:r,className:(0,i.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})});K.displayName="TableHead";let Q=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("td",{ref:r,className:(0,i.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})});Q.displayName="TableCell",s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("caption",{ref:r,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",t),...s})}).displayName="TableCaption";let ee=(0,o.Z)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var er=t(3711);let et=(0,o.Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),ea=(0,o.Z)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]);var es=t(4900);let en=(0,o.Z)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),ei=(0,o.Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);function el(e){let{links:r,onLinkAction:t}=e,{showToast:s}=(0,T.useToast)(),i=async e=>{try{await navigator.clipboard.writeText(e),s("success","Copied!","Proxy link copied to clipboard")}catch(e){s("error","Error","Failed to copy link")}},l=async(e,r)=>{try{if((await fetch("/api/admin/toggle-link",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({proxyId:e,activate:!r})})).ok)s("success","Success","Group ".concat(r?"paused":"activated"," successfully!")),t();else throw Error("Failed to toggle link")}catch(e){s("error","Error","Failed to update group status")}},c=async e=>{if(confirm("Reset this group? This will allow 3 new participants to join."))try{if((await fetch("/api/admin/reset-usage",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({proxyId:e})})).ok)s("success","Success","Group usage reset successfully!"),t();else throw Error("Failed to reset usage")}catch(e){s("error","Error","Failed to reset group usage")}},o=async(e,r)=>{if(confirm('Are you sure you want to delete the experiment link for "'.concat(r,'"?\n\nThis action cannot be undone and will permanently remove:\n• The proxy link\n• All usage data\n• Participant records')))try{let a=await fetch("/api/admin/delete-link",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({proxyId:e})}),n=await a.json();if(n.success)s("success","Success",'Experiment link for "'.concat(r,'" deleted successfully')),t();else throw Error(n.error||"Failed to delete link")}catch(e){s("error","Error","Failed to delete experiment link")}};return 0===r.length?(0,a.jsx)(u.Zb,{className:"shadow-lg border-0 bg-white/80 backdrop-blur-sm",children:(0,a.jsxs)(u.aY,{className:"flex flex-col items-center justify-center py-16",children:[(0,a.jsx)("div",{className:"rounded-full bg-gradient-to-r from-primary-100 to-accent-100 p-4 mb-4",children:(0,a.jsx)(P,{className:"h-8 w-8 text-primary-600"})}),(0,a.jsx)(u.ll,{className:"mb-2 text-gray-900",children:"No experiment links yet"}),(0,a.jsx)(u.SZ,{className:"text-gray-600",children:"Create your first experiment link using the form above."})]})}):(0,a.jsxs)(u.Zb,{className:"shadow-lg border-0 bg-white/80 backdrop-blur-sm",children:[(0,a.jsxs)(u.Ol,{children:[(0,a.jsxs)(u.ll,{className:"flex items-center gap-2 text-gray-900",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg bg-gradient-to-r from-primary-100 to-accent-100",children:(0,a.jsx)(P,{className:"h-5 w-5 text-primary-600"})}),"Experiment Links"]}),(0,a.jsx)(u.SZ,{className:"text-gray-600",children:"Manage your experiment proxy links and monitor participant activity"})]}),(0,a.jsx)(u.aY,{children:(0,a.jsx)("div",{className:"rounded-md border",children:(0,a.jsxs)(J,{children:[(0,a.jsx)(W,{children:(0,a.jsxs)(B,{children:[(0,a.jsx)(K,{children:"Group"}),(0,a.jsx)(K,{children:"Proxy Link"}),(0,a.jsx)(K,{children:"Usage"}),(0,a.jsx)(K,{children:"Status"}),(0,a.jsx)(K,{children:"Created"}),(0,a.jsx)(K,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(X,{children:r.map(e=>{let r=e.current_uses/e.max_uses*100,t=e.current_uses>=e.max_uses,s="".concat(window.location.origin,"/proxy/").concat(e.proxy_id);return(0,a.jsxs)(B,{children:[(0,a.jsx)(Q,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"font-medium",children:e.group_name||"Unnamed Group"})]})}),(0,a.jsx)(Q,{children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm font-mono",children:[(0,a.jsx)("span",{className:"truncate max-w-[200px]",title:s,children:s}),(0,a.jsx)(n.z,{variant:"ghost",size:"sm",onClick:()=>i(s),className:"h-6 w-6 p-0",children:(0,a.jsx)(ee,{className:"h-3 w-3"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[(0,a.jsx)(er.Z,{className:"h-3 w-3"}),(0,a.jsx)("span",{className:"truncate max-w-[200px]",children:e.real_url})]})]})}),(0,a.jsx)(Q,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"text-sm font-medium",children:[e.current_uses,"/",e.max_uses]}),(0,a.jsx)(Y,{value:r,className:"h-2"})]})}),(0,a.jsx)(Q,{children:(0,a.jsx)(E.C,{variant:e.is_active?t?"destructive":"default":"secondary",children:e.is_active?t?"Completed":"Active":"Inactive"})}),(0,a.jsx)(Q,{children:(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[(0,a.jsx)(et,{className:"h-3 w-3"}),new Date(e.created_at).toLocaleDateString()]})}),(0,a.jsx)(Q,{className:"text-right",children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,a.jsx)(n.z,{variant:"ghost",size:"sm",onClick:()=>i(s),className:"h-8 w-8 p-0",children:(0,a.jsx)(ee,{className:"h-3 w-3"})}),(0,a.jsx)(n.z,{variant:"ghost",size:"sm",onClick:()=>l(e.proxy_id,e.is_active),className:"h-8 w-8 p-0",children:e.is_active?(0,a.jsx)(ea,{className:"h-3 w-3"}):(0,a.jsx)(es.Z,{className:"h-3 w-3"})}),(0,a.jsx)(n.z,{variant:"ghost",size:"sm",onClick:()=>c(e.proxy_id),className:"h-8 w-8 p-0",children:(0,a.jsx)(en,{className:"h-3 w-3"})}),(0,a.jsx)(n.z,{variant:"ghost",size:"sm",onClick:()=>o(e.proxy_id,e.group_name||"Unnamed Group"),className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:(0,a.jsx)(ei,{className:"h-3 w-3"})})]})})]},e.proxy_id)})})]})})})]})}function ec(){let[e,r]=(0,s.useState)([]),[t,n]=(0,s.useState)({total:0,active:0,participants:0,full:0}),[i,c]=(0,s.useState)(!0);(0,s.useEffect)(()=>{o()},[]);let o=async()=>{try{let[e,t]=await Promise.all([fetch("/api/admin/links",{credentials:"include"}),fetch("/api/admin/stats",{credentials:"include"})]);if(e.ok&&t.ok){let a=await e.json(),s=await t.json();r(a),n(s)}}catch(e){console.error("Error loading data:",e)}finally{c(!1)}};return i?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-4",children:Array.from({length:4}).map((e,r)=>(0,a.jsx)(l,{className:"h-24 w-full"},r))}),(0,a.jsx)(l,{className:"h-48 w-full"}),(0,a.jsx)(l,{className:"h-64 w-full"})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(M,{stats:t}),(0,a.jsx)(R,{onLinkCreated:()=>{o()}}),(0,a.jsx)(el,{links:e,onLinkAction:()=>{o()}})]})}function eo(){let[e,r]=(0,s.useState)(null),[t,i]=(0,s.useState)(!0);(0,s.useEffect)(()=>{o()},[]);let o=async()=>{try{let e=await fetch("/api/admin/check-auth",{credentials:"include"}),t=await e.json();r(t.isLoggedIn)}catch(e){console.error("Error checking auth status:",e),r(!1)}finally{i(!1)}},u=async()=>{try{await fetch("/api/admin/logout",{method:"POST",credentials:"include"}),r(!1)}catch(e){console.error("Error logging out:",e)}};return t?(0,a.jsx)("div",{className:"min-h-screen bg-background",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"mb-8 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(l,{className:"h-8 w-8 rounded"}),(0,a.jsx)(l,{className:"h-8 w-48"})]}),(0,a.jsx)(l,{className:"h-10 w-24"})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-4",children:Array.from({length:4}).map((e,r)=>(0,a.jsx)(l,{className:"h-24 w-full"},r))}),(0,a.jsx)(l,{className:"h-64 w-full"})]})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-background to-accent-50",children:[(0,a.jsx)("div",{className:"border-b bg-white/80 backdrop-blur-sm shadow-sm",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-r from-primary-600 to-accent-600 text-white",children:(0,a.jsx)(c.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"oTree Proxy Manager"}),(0,a.jsx)("p",{className:"text-sm text-primary-600/70",children:"Professional Link Management System"})]})]}),e&&(0,a.jsxs)(n.z,{variant:"outline",size:"sm",onClick:u,className:"gap-2 border-primary-200 text-primary-700 hover:bg-primary-50",children:[(0,a.jsx)(d,{className:"h-4 w-4"}),"Sign Out"]})]})})}),(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:e?(0,a.jsx)(ec,{}):(0,a.jsx)(N,{onLoginSuccess:()=>{r(!0)}})})]})}},7929:function(e,r,t){"use strict";t.d(r,{X:function(){return o},bZ:function(){return c}});var a=t(7437),s=t(2265),n=t(6061),i=t(1657);let l=(0,n.j)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=s.forwardRef((e,r)=>{let{className:t,variant:s,...n}=e;return(0,a.jsx)("div",{ref:r,role:"alert",className:(0,i.cn)(l({variant:s}),t),...n})});c.displayName="Alert",s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("h5",{ref:r,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",t),...s})}).displayName="AlertTitle";let o=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",t),...s})});o.displayName="AlertDescription"},1478:function(e,r,t){"use strict";t.d(r,{C:function(){return l}});var a=t(7437);t(2265);var s=t(6061),n=t(1657);let i=(0,s.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:r,variant:t,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)(i({variant:t}),r),...s})}},5754:function(e,r,t){"use strict";t.d(r,{z:function(){return o}});var a=t(7437),s=t(2265),n=t(4949),i=t(6061),l=t(1657);let c=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,r)=>{let{className:t,variant:s,size:i,asChild:o=!1,...d}=e,u=o?n.g7:"button";return(0,a.jsx)(u,{className:(0,l.cn)(c({variant:s,size:i,className:t})),ref:r,...d})});o.displayName="Button"},7815:function(e,r,t){"use strict";t.d(r,{Ol:function(){return l},SZ:function(){return o},Zb:function(){return i},aY:function(){return d},ll:function(){return c}});var a=t(7437),s=t(2265),n=t(1657);let i=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",t),...s})});i.displayName="Card";let l=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...s})});l.displayName="CardHeader";let c=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("font-semibold leading-none tracking-tight",t),...s})});c.displayName="CardTitle";let o=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",t),...s})});o.displayName="CardDescription";let d=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("p-6 pt-0",t),...s})});d.displayName="CardContent",s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",t),...s})}).displayName="CardFooter"},8338:function(e,r,t){"use strict";t.r(r),t.d(r,{ToastProvider:function(){return h},useToast:function(){return x}});var a=t(7437),s=t(2265),n=t(2167),i=t(5251),l=t(4530),c=t(9806),o=t(4631),d=t(4056),u=t(2549);let m=(0,s.createContext)(void 0),x=()=>{let e=(0,s.useContext)(m);if(!e)throw Error("useToast must be used within a ToastProvider");return e},p={success:{icon:l.Z,bgColor:"bg-success-50 border-success-200",iconColor:"text-success-600",titleColor:"text-success-800",descColor:"text-success-700"},error:{icon:c.Z,bgColor:"bg-error-50 border-error-200",iconColor:"text-error-600",titleColor:"text-error-800",descColor:"text-error-700"},warning:{icon:o.Z,bgColor:"bg-warning-50 border-warning-200",iconColor:"text-warning-600",titleColor:"text-warning-800",descColor:"text-warning-700"},info:{icon:d.Z,bgColor:"bg-blue-50 border-blue-200",iconColor:"text-blue-600",titleColor:"text-blue-800",descColor:"text-blue-700"}},h=e=>{let{children:r}=e,[t,l]=(0,s.useState)([]),c=(0,s.useCallback)((e,r,t)=>{let a=Math.random().toString(36).substr(2,9),s={id:a,type:e,title:r,description:t};l(e=>[...e,s]),setTimeout(()=>{l(e=>e.filter(e=>e.id!==a))},5e3)},[]),o=(0,s.useCallback)(e=>{l(r=>r.filter(r=>r.id!==e))},[]);return(0,a.jsxs)(m.Provider,{value:{showToast:c},children:[r,(0,a.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:(0,a.jsx)(n.M,{children:t.map(e=>{let r=p[e.type],t=r.icon;return(0,a.jsx)(i.E.div,{initial:{opacity:0,x:300,scale:.3},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:300,scale:.5,transition:{duration:.2}},className:"".concat(r.bgColor," border rounded-lg p-4 shadow-lg max-w-sm min-w-[300px] backdrop-blur-sm"),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(t,{className:"h-5 w-5 ".concat(r.iconColor," flex-shrink-0 mt-0.5")}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-semibold ".concat(r.titleColor),children:e.title}),e.description&&(0,a.jsx)("p",{className:"text-sm mt-1 ".concat(r.descColor),children:e.description})]}),(0,a.jsx)("button",{onClick:()=>o(e.id),className:"".concat(r.iconColor," hover:opacity-70 transition-opacity flex-shrink-0"),children:(0,a.jsx)(u.Z,{className:"h-4 w-4"})})]})},e.id)})})})]})}},1657:function(e,r,t){"use strict";t.d(r,{cn:function(){return n}});var a=t(7042),s=t(4769);function n(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.m6)((0,a.W)(r))}},9381:function(e,r,t){"use strict";t.d(r,{WV:function(){return i}});var a=t(2265);t(4887);var s=t(4949),n=t(7437),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{let t=(0,s.Z8)(`Primitive.${r}`),i=a.forwardRef((e,a)=>{let{asChild:s,...i}=e,l=s?t:r;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,n.jsx)(l,{...i,ref:a})});return i.displayName=`Primitive.${r}`,{...e,[r]:i}},{})}},function(e){e.O(0,[275,651,971,938,744],function(){return e(e.s=7298)}),_N_E=e.O()}]);