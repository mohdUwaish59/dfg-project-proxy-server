(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{4588:function(e,s,t){Promise.resolve().then(t.bind(t,1746))},1746:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return eZ}});var r=t(7437),a=t(2265),i=t(5754),l=t(1657);function n(e){let{className:s,...t}=e;return(0,r.jsx)("div",{className:(0,l.cn)("animate-pulse rounded-md bg-primary/10",s),...t})}var c=t(1310),o=t(5883),d=t(7815);let m=a.forwardRef((e,s)=>{let{className:t,type:a,...i}=e;return(0,r.jsx)("input",{type:a,className:(0,l.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...i})});m.displayName="Input";var x=t(9842),u=t(7929),p=t(5589),h=t(7972),f=t(2405),g=t(3715);function j(e){let{onLoginSuccess:s}=e,[t,l]=(0,a.useState)({username:"",password:""}),[n,c]=(0,a.useState)(!1),[o,j]=(0,a.useState)(""),b=async e=>{e.preventDefault(),c(!0),j("");try{let e=await fetch("/api/admin/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(e.ok)s();else{let s=await e.json();j(s.error||"Login failed")}}catch(e){j("Network error. Please try again.")}finally{c(!1)}};return(0,r.jsx)("div",{className:"flex min-h-[60vh] items-center justify-center",children:(0,r.jsxs)(d.Zb,{className:"w-full max-w-md shadow-xl border-0 bg-white/95 backdrop-blur-sm",children:[(0,r.jsxs)(d.Ol,{className:"space-y-1 text-center",children:[(0,r.jsx)("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-gradient-to-r from-primary-600 to-accent-600",children:(0,r.jsx)(p.Z,{className:"h-8 w-8 text-white"})}),(0,r.jsx)(d.ll,{className:"text-2xl font-bold text-gray-900",children:"Admin Access"}),(0,r.jsx)(d.SZ,{className:"text-gray-600",children:"Sign in to your admin account to manage experiment links"})]}),(0,r.jsx)(d.aY,{children:(0,r.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(x._,{htmlFor:"username",className:"flex items-center gap-2",children:[(0,r.jsx)(h.Z,{className:"h-4 w-4"}),"Username"]}),(0,r.jsx)(m,{id:"username",type:"text",placeholder:"Enter your username",value:t.username,onChange:e=>l({...t,username:e.target.value}),required:!0,disabled:n})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(x._,{htmlFor:"password",className:"flex items-center gap-2",children:[(0,r.jsx)(f.Z,{className:"h-4 w-4"}),"Password"]}),(0,r.jsx)(m,{id:"password",type:"password",placeholder:"Enter your password",value:t.password,onChange:e=>l({...t,password:e.target.value}),required:!0,disabled:n})]}),o&&(0,r.jsx)(u.bZ,{variant:"destructive",children:(0,r.jsx)(u.X,{children:o})}),(0,r.jsx)(i.z,{type:"submit",className:"w-full bg-gradient-to-r from-primary-600 to-primary-700 hover:from-primary-700 hover:to-primary-800",disabled:n,children:n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]})})]})})}var b=t(5750),N=t(6840),y=t(2527),v=t(4530);let w=[{key:"total",label:"Total Groups",icon:b.Z,description:"All experiment groups"},{key:"active",label:"Active Groups",icon:N.Z,description:"Currently accepting participants"},{key:"participants",label:"Total Participants",icon:y.Z,description:"Across all experiments"},{key:"full",label:"Completed Groups",icon:v.Z,description:"Reached capacity"}];function k(e){let{stats:s,links:t}=e,a=(null==t?void 0:t.filter(e=>e.is_active&&(e.waiting_count||0)>0).length)||0,i=(null==t?void 0:t.reduce((e,s)=>e+(s.waiting_count||0),0))||0;return(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[w.map((e,t)=>(0,r.jsxs)(d.Zb,{className:"transition-all hover:shadow-lg border-0 shadow-md bg-white/80 backdrop-blur-sm",children:[(0,r.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(d.ll,{className:"text-sm font-medium text-gray-600",children:e.label}),(0,r.jsx)("div",{className:"p-2 rounded-lg ".concat(["bg-primary-50","bg-success-50","bg-accent-50","bg-warning-50"][t%4]),children:(0,r.jsx)(e.icon,{className:"h-4 w-4 ".concat(["text-primary-600","text-success-600","text-accent-600","text-warning-600"][t%4])})})]}),(0,r.jsxs)(d.aY,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold bg-gradient-to-r ".concat(["from-primary-500 to-primary-600","from-success-500 to-success-600","from-accent-500 to-accent-600","from-warning-500 to-warning-600"][t%4]," bg-clip-text text-transparent"),children:s[e.key]}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]})]},e.key)),i>0&&(0,r.jsxs)(d.Zb,{className:"transition-all hover:shadow-lg border-0 shadow-md bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200",children:[(0,r.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(d.ll,{className:"text-sm font-medium text-blue-700",children:"Active Waiting Rooms"}),(0,r.jsx)("div",{className:"p-2 rounded-lg bg-blue-100",children:(0,r.jsx)(b.Z,{className:"h-4 w-4 text-blue-600 animate-pulse"})})]}),(0,r.jsxs)(d.aY,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:i}),(0,r.jsxs)("p",{className:"text-xs text-blue-600",children:[1===i?"participant":"participants"," waiting in ",a," ",1===a?"room":"rooms"]})]})]})]})}var C=t(3927),_=t(3523),T=t(9224),S=t(2442);let Z=C.fC;C.ZA;let R=C.B4,z=a.forwardRef((e,s)=>{let{className:t,children:a,...i}=e;return(0,r.jsxs)(C.xz,{ref:s,className:(0,l.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...i,children:[a,(0,r.jsx)(C.JO,{asChild:!0,children:(0,r.jsx)(_.Z,{className:"h-4 w-4 opacity-50"})})]})});z.displayName=C.xz.displayName;let P=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(C.u_,{ref:s,className:(0,l.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,r.jsx)(T.Z,{className:"h-4 w-4"})})});P.displayName=C.u_.displayName;let E=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(C.$G,{ref:s,className:(0,l.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,r.jsx)(_.Z,{className:"h-4 w-4"})})});E.displayName=C.$G.displayName;let F=a.forwardRef((e,s)=>{let{className:t,children:a,position:i="popper",...n}=e;return(0,r.jsx)(C.h_,{children:(0,r.jsxs)(C.VY,{ref:s,className:(0,l.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...n,children:[(0,r.jsx)(P,{}),(0,r.jsx)(C.l_,{className:(0,l.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,r.jsx)(E,{})]})})});F.displayName=C.VY.displayName,a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(C.__,{ref:s,className:(0,l.cn)("px-2 py-1.5 text-sm font-semibold",t),...a})}).displayName=C.__.displayName;let L=a.forwardRef((e,s)=>{let{className:t,children:a,...i}=e;return(0,r.jsxs)(C.ck,{ref:s,className:(0,l.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[(0,r.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(C.wU,{children:(0,r.jsx)(S.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(C.eT,{children:a})]})});L.displayName=C.ck.displayName,a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(C.Z0,{ref:s,className:(0,l.cn)("-mx-1 my-1 h-px bg-muted",t),...a})}).displayName=C.Z0.displayName;var I=t(8338),D=t(9883),U=t(820),M=t(6224);function A(e){let{onLinkCreated:s}=e,[t,l]=(0,a.useState)({groupName:"",realUrl:"",otreeSessionId:"",category:"",treatmentTitle:""}),[n,c]=(0,a.useState)(!1),[o,u]=(0,a.useState)(null),{showToast:p}=(0,I.useToast)(),h=async e=>{e.preventDefault(),c(!0);try{let e=await fetch("/api/admin/create-link",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(e.ok){let t=await e.json(),r="".concat(window.location.origin,"/proxy/").concat(t.proxyId),a="".concat(window.location.origin,"/redirect/").concat(t.proxyId);u({proxyId:t.proxyId,proxyUrl:r,postExperimentRedirectUrl:a}),p("success","Success","Experiment link created successfully!"),l({groupName:"",realUrl:"",otreeSessionId:"",category:"",treatmentTitle:""}),s()}else{let s=await e.json();p("error","Error",s.error||"Failed to create link")}}catch(e){p("error","Error","Network error. Please try again.")}finally{c(!1)}},f=async(e,s)=>{try{await navigator.clipboard.writeText(e),p("success","Copied!","".concat(s," copied to clipboard"))}catch(e){p("error","Error","Failed to copy to clipboard")}};return(0,r.jsxs)(d.Zb,{className:"shadow-lg border-0 bg-white/80 backdrop-blur-sm",children:[(0,r.jsxs)(d.Ol,{children:[(0,r.jsxs)(d.ll,{className:"flex items-center gap-2 text-gray-900",children:[(0,r.jsx)("div",{className:"p-2 rounded-lg bg-gradient-to-r from-primary-100 to-accent-100",children:(0,r.jsx)(D.Z,{className:"h-5 w-5 text-primary-600"})}),"Create New Experiment Link"]}),(0,r.jsx)(d.SZ,{className:"text-gray-600",children:"Generate a secure proxy link for your oTree experiment"})]}),(0,r.jsxs)(d.aY,{children:[(0,r.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(x._,{htmlFor:"groupName",className:"flex items-center gap-2",children:[(0,r.jsx)(b.Z,{className:"h-4 w-4"}),"Group Name"]}),(0,r.jsxs)(Z,{value:t.groupName,onValueChange:e=>l({...t,groupName:e}),disabled:n,required:!0,children:[(0,r.jsx)(z,{children:(0,r.jsx)(R,{placeholder:"Select group name"})}),(0,r.jsxs)(F,{children:[(0,r.jsx)(L,{value:"T1:MMM",children:"T1:MMM"}),(0,r.jsx)(L,{value:"T1:FFF",children:"T1:FFF"}),(0,r.jsx)(L,{value:"T1:MIXED",children:"T1:MIXED"}),(0,r.jsx)(L,{value:"T2:MMM",children:"T2:MMM"}),(0,r.jsx)(L,{value:"T2:FFF",children:"T2:FFF"}),(0,r.jsx)(L,{value:"T2:MIXED",children:"T2:MIXED"}),(0,r.jsx)(L,{value:"T3:MMM",children:"T3:MMM"}),(0,r.jsx)(L,{value:"T3:FFF",children:"T3:FFF"}),(0,r.jsx)(L,{value:"T3:MIXED",children:"T3:MIXED"}),(0,r.jsx)(L,{value:"T4:MMM",children:"T4:MMM"}),(0,r.jsx)(L,{value:"T4:FFF",children:"T4:FFF"}),(0,r.jsx)(L,{value:"T4:MIXED",children:"T4:MIXED"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(x._,{htmlFor:"realUrl",className:"flex items-center gap-2",children:[(0,r.jsx)(U.Z,{className:"h-4 w-4"}),"oTree Experiment URL"]}),(0,r.jsx)(m,{id:"realUrl",type:"url",placeholder:"https://your-otree-server.com/room/...",value:t.realUrl,onChange:e=>l({...t,realUrl:e.target.value}),required:!0,disabled:n})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(x._,{htmlFor:"otreeSessionId",className:"flex items-center gap-2",children:[(0,r.jsx)(U.Z,{className:"h-4 w-4"}),"oTree Session ID",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)(m,{id:"otreeSessionId",type:"text",placeholder:"e.g., abc123xyz or session_2024_01",value:t.otreeSessionId,onChange:e=>l({...t,otreeSessionId:e.target.value}),required:!0,disabled:n}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Enter the oTree session identifier to track this experiment"})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(x._,{htmlFor:"category",children:"Category"}),(0,r.jsxs)(Z,{value:t.category,onValueChange:e=>l({...t,category:e}),disabled:n,children:[(0,r.jsx)(z,{children:(0,r.jsx)(R,{placeholder:"Select category"})}),(0,r.jsxs)(F,{children:[(0,r.jsx)(L,{value:"All Male",children:"All Male"}),(0,r.jsx)(L,{value:"All Female",children:"All Female"}),(0,r.jsx)(L,{value:"Mixed",children:"Mixed Gender"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(x._,{htmlFor:"treatmentTitle",children:"Treatment Title"}),(0,r.jsxs)(Z,{value:t.treatmentTitle,onValueChange:e=>l({...t,treatmentTitle:e}),disabled:n,children:[(0,r.jsx)(z,{children:(0,r.jsx)(R,{placeholder:"Select treatment"})}),(0,r.jsxs)(F,{children:[(0,r.jsx)(L,{value:"Treatment 1: No communication – No Gender Information",children:"Treatment 1: No communication – No Gender Information"}),(0,r.jsx)(L,{value:"Treatment 2: Chat Communication – No Gender Information",children:"Treatment 2: Chat Communication – No Gender Information"}),(0,r.jsx)(L,{value:"Treatment 3: Chat Communication – Gender Information",children:"Treatment 3: Chat Communication – Gender Information"}),(0,r.jsx)(L,{value:"Treatment 4: Video Chat Communication",children:"Treatment 4: Video Chat Communication"})]})]})]})]}),(0,r.jsx)(i.z,{type:"submit",disabled:n,className:"w-full md:w-auto bg-gradient-to-r from-success-600 to-success-700 hover:from-success-700 hover:to-success-800",children:n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(D.Z,{className:"mr-2 h-4 w-4"}),"Create Link"]})})]}),o&&(0,r.jsxs)("div",{className:"mt-6 p-6 bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-200 rounded-lg space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-green-800 font-semibold text-lg",children:[(0,r.jsx)("div",{className:"p-2 rounded-full bg-green-200",children:(0,r.jsx)(D.Z,{className:"h-5 w-5 text-green-700"})}),"Link Created Successfully!"]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-green-200",children:[(0,r.jsx)(x._,{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"\uD83D\uDCCB Unique Link Code (Save This!)"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("code",{className:"flex-1 px-3 py-2 bg-yellow-50 border border-yellow-300 rounded font-mono text-lg font-bold text-yellow-900",children:o.proxyId}),(0,r.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>f(o.proxyId,"Link code"),className:"shrink-0",children:(0,r.jsx)(M.Z,{className:"h-4 w-4"})})]}),(0,r.jsx)("p",{className:"text-xs text-gray-600 mt-2",children:"\uD83D\uDCA1 Save this code! You'll need it to configure the post-experiment redirect URL after creating your Prolific study."})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-green-200",children:[(0,r.jsx)(x._,{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"\uD83D\uDD17 Pre-Experiment Link (Share with Participants)"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("code",{className:"flex-1 px-3 py-2 bg-blue-50 border border-blue-300 rounded font-mono text-sm text-blue-900 truncate",children:o.proxyUrl}),(0,r.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>f(o.proxyUrl,"Pre-experiment link"),className:"shrink-0",children:(0,r.jsx)(M.Z,{className:"h-4 w-4"})})]}),(0,r.jsx)("p",{className:"text-xs text-gray-600 mt-2",children:"Use this link as the Prolific study URL (participants start here)"})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-green-200",children:[(0,r.jsx)(x._,{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"\uD83C\uDFAF Post-Experiment Redirect Link (Use in oTree)"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("code",{className:"flex-1 px-3 py-2 bg-purple-50 border border-purple-300 rounded font-mono text-sm text-purple-900 truncate",children:o.postExperimentRedirectUrl}),(0,r.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>f(o.postExperimentRedirectUrl,"Post-experiment link"),className:"shrink-0",children:(0,r.jsx)(M.Z,{className:"h-4 w-4"})})]}),(0,r.jsx)("p",{className:"text-xs text-gray-600 mt-2",children:"Add this link to your oTree experiment's final page (participants end here)"})]})]}),(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-blue-900 mb-2 text-sm",children:"\uD83D\uDCDD Next Steps:"}),(0,r.jsxs)("ol",{className:"text-sm text-blue-800 space-y-1 list-decimal list-inside",children:[(0,r.jsxs)("li",{children:["Copy and save the ",(0,r.jsx)("strong",{children:"Unique Link Code"})," above"]}),(0,r.jsxs)("li",{children:["Use the ",(0,r.jsx)("strong",{children:"Pre-Experiment Link"})," as your Prolific study URL"]}),(0,r.jsxs)("li",{children:["Add the ",(0,r.jsx)("strong",{children:"Post-Experiment Link"})," to your oTree final page"]}),(0,r.jsx)("li",{children:'After creating your Prolific study, go to the "Links Table" below'}),(0,r.jsx)("li",{children:'Click "Configure Post-Redirect" and paste your Prolific completion URL'})]})]}),(0,r.jsx)(i.z,{variant:"outline",onClick:()=>u(null),className:"w-full",children:"Close"})]})]})]})}var O=t(1478),G=t(500);let Y=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:s,className:(0,l.cn)("w-full caption-bottom text-sm",t),...a})})});Y.displayName="Table";let V=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("thead",{ref:s,className:(0,l.cn)("[&_tr]:border-b",t),...a})});V.displayName="TableHeader";let X=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("tbody",{ref:s,className:(0,l.cn)("[&_tr:last-child]:border-0",t),...a})});X.displayName="TableBody",a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("tfoot",{ref:s,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...a})}).displayName="TableFooter";let B=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("tr",{ref:s,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...a})});B.displayName="TableRow";let J=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("th",{ref:s,className:(0,l.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})});J.displayName="TableHead";let q=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("td",{ref:s,className:(0,l.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})});q.displayName="TableCell",a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("caption",{ref:s,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",t),...a})}).displayName="TableCaption";var H=t(1827),W=t(2642),$=t(2549),Q=t(3711),K=t(8203),ee=t(9409),es=t(3101),et=t(4900),er=t(5432),ea=t(1138),ei=t(8712);let el=ei.fC;ei.xz;let en=ei.h_;ei.x8;let ec=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(ei.aV,{ref:s,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...a})});ec.displayName=ei.aV.displayName;let eo=a.forwardRef((e,s)=>{let{className:t,children:a,...i}=e;return(0,r.jsxs)(en,{children:[(0,r.jsx)(ec,{}),(0,r.jsxs)(ei.VY,{ref:s,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...i,children:[a,(0,r.jsxs)(ei.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)($.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});eo.displayName=ei.VY.displayName;let ed=e=>{let{className:s,...t}=e;return(0,r.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};ed.displayName="DialogHeader";let em=e=>{let{className:s,...t}=e;return(0,r.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};em.displayName="DialogFooter";let ex=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(ei.Dx,{ref:s,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",t),...a})});ex.displayName=ei.Dx.displayName;let eu=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(ei.dk,{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",t),...a})});function ep(e){let{links:s,onLinkAction:t,onViewRoom:l}=e,{showToast:n}=(0,I.useToast)(),[c,o]=(0,a.useState)(""),[u,p]=(0,a.useState)("all"),[h,f]=(0,a.useState)("all"),[j,N]=(0,a.useState)(null),[y,v]=(0,a.useState)(""),[w,k]=(0,a.useState)(!1),C=(0,a.useMemo)(()=>Array.from(new Set(s.map(e=>e.category).filter(Boolean))).sort(),[s]),_=(0,a.useMemo)(()=>Array.from(new Set(s.map(e=>e.treatment_title).filter(Boolean))).sort(),[s]),T=(0,a.useMemo)(()=>s.filter(e=>{var s,t,r,a;let i=""===c||(null===(s=e.group_name)||void 0===s?void 0:s.toLowerCase().includes(c.toLowerCase()))||(null===(t=e.otree_session_id)||void 0===t?void 0:t.toLowerCase().includes(c.toLowerCase()))||(null===(r=e.category)||void 0===r?void 0:r.toLowerCase().includes(c.toLowerCase()))||(null===(a=e.treatment_title)||void 0===a?void 0:a.toLowerCase().includes(c.toLowerCase())),l="all"===u||e.category===u,n="all"===h||e.treatment_title===h;return i&&l&&n}),[s,c,u,h]),S=()=>{o(""),p("all"),f("all")},P=""!==c||"all"!==u||"all"!==h,E=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Proxy link copied to clipboard";try{await navigator.clipboard.writeText(e),n("success","Copied!",s)}catch(e){n("error","Error","Failed to copy link")}},D=async(e,s)=>{try{if((await fetch("/api/admin/toggle-link",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({proxyId:e,activate:!s})})).ok)n("success","Success","Group ".concat(s?"paused":"activated"," successfully!")),t();else throw Error("Failed to toggle link")}catch(e){n("error","Error","Failed to update group status")}},A=async e=>{if(confirm("Reset this group? This will allow 3 new participants to join."))try{if((await fetch("/api/admin/reset-usage",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({proxyId:e})})).ok)n("success","Success","Group usage reset successfully!"),t();else throw Error("Failed to reset usage")}catch(e){n("error","Error","Failed to reset group usage")}},ei=async(e,s)=>{if(confirm('Are you sure you want to delete the experiment link for "'.concat(s,'"?\n\nThis action cannot be undone and will permanently remove:\n• The proxy link\n• All usage data\n• Participant records')))try{let r=await fetch("/api/admin/delete-link",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({proxyId:e})}),a=await r.json();if(a.success)n("success","Success",'Experiment link for "'.concat(s,'" deleted successfully')),t();else throw Error(a.error||"Failed to delete link")}catch(e){n("error","Error","Failed to delete experiment link")}},en=e=>{N({proxyId:e.proxy_id,groupName:e.group_name,otreeSessionId:e.otree_session_id||"N/A",currentUrl:e.post_experiment_redirect_url||""}),v(e.post_experiment_redirect_url||"")},ec=async()=>{if(j){k(!0);try{let e=await fetch("/api/admin/update-post-redirect",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({proxyId:j.proxyId,postExperimentRedirectUrl:y})}),s=await e.json();if(s.success)n("success","Success","Post-experiment redirect URL updated successfully"),N(null),v(""),t();else throw Error(s.error||"Failed to update redirect URL")}catch(e){n("error","Error","Failed to update post-experiment redirect URL")}finally{k(!1)}}};return 0===s.length?(0,r.jsx)(d.Zb,{className:"shadow-lg border-0 bg-white/80 backdrop-blur-sm",children:(0,r.jsxs)(d.aY,{className:"flex flex-col items-center justify-center py-16",children:[(0,r.jsx)("div",{className:"rounded-full bg-gradient-to-r from-primary-100 to-accent-100 p-4 mb-4",children:(0,r.jsx)(U.Z,{className:"h-8 w-8 text-primary-600"})}),(0,r.jsx)(d.ll,{className:"mb-2 text-gray-900",children:"No experiment links yet"}),(0,r.jsx)(d.SZ,{className:"text-gray-600",children:"Create your first experiment link using the form above."})]})}):(0,r.jsxs)(d.Zb,{className:"shadow-lg border-0 bg-white/80 backdrop-blur-sm",children:[(0,r.jsxs)(d.Ol,{children:[(0,r.jsxs)(d.ll,{className:"flex items-center gap-2 text-gray-900",children:[(0,r.jsx)("div",{className:"p-2 rounded-lg bg-gradient-to-r from-primary-100 to-accent-100",children:(0,r.jsx)(U.Z,{className:"h-5 w-5 text-primary-600"})}),"Experiment Links"]}),(0,r.jsx)(d.SZ,{className:"text-gray-600",children:"Manage your experiment proxy links and monitor participant activity"})]}),(0,r.jsxs)(d.aY,{children:[(0,r.jsxs)("div",{className:"mb-6 space-y-4",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,r.jsxs)("div",{className:"relative flex-1",children:[(0,r.jsx)(H.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,r.jsx)(m,{placeholder:"Search by group name, session ID, category, or treatment...",value:c,onChange:e=>o(e.target.value),className:"pl-10"})]}),(0,r.jsxs)(Z,{value:u,onValueChange:p,children:[(0,r.jsxs)(z,{className:"w-full sm:w-[200px]",children:[(0,r.jsx)(W.Z,{className:"h-4 w-4 mr-2"}),(0,r.jsx)(R,{placeholder:"All Categories"})]}),(0,r.jsxs)(F,{children:[(0,r.jsx)(L,{value:"all",children:"All Categories"}),C.map(e=>(0,r.jsx)(L,{value:e,children:e},e))]})]}),(0,r.jsxs)(Z,{value:h,onValueChange:f,children:[(0,r.jsxs)(z,{className:"w-full sm:w-[250px]",children:[(0,r.jsx)(W.Z,{className:"h-4 w-4 mr-2"}),(0,r.jsx)(R,{placeholder:"All Treatments"})]}),(0,r.jsxs)(F,{children:[(0,r.jsx)(L,{value:"all",children:"All Treatments"}),_.map(e=>(0,r.jsx)(L,{value:e,children:e.length>40?"".concat(e.substring(0,40),"..."):e},e))]})]}),P&&(0,r.jsxs)(i.z,{variant:"outline",onClick:S,className:"w-full sm:w-auto",children:[(0,r.jsx)($.Z,{className:"h-4 w-4 mr-2"}),"Clear"]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[(0,r.jsxs)("span",{children:["Showing ",T.length," of ",s.length," experiment",1!==s.length?"s":""]}),P&&(0,r.jsx)(O.C,{variant:"secondary",className:"text-xs",children:"Filtered"})]})]}),(0,r.jsx)("div",{className:"rounded-md border",children:(0,r.jsxs)(Y,{children:[(0,r.jsx)(V,{children:(0,r.jsxs)(B,{children:[(0,r.jsx)(J,{children:"Group"}),(0,r.jsx)(J,{children:"oTree Session"}),(0,r.jsx)(J,{children:"Category"}),(0,r.jsx)(J,{children:"Treatment"}),(0,r.jsx)(J,{children:"Proxy Link"}),(0,r.jsx)(J,{children:"Usage"}),(0,r.jsx)(J,{children:"Status"}),(0,r.jsx)(J,{children:"Created"}),(0,r.jsx)(J,{className:"text-right",children:"Actions"})]})}),(0,r.jsx)(X,{children:0===T.length?(0,r.jsx)(B,{children:(0,r.jsx)(q,{colSpan:9,className:"text-center py-8",children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,r.jsx)(H.Z,{className:"h-8 w-8 text-muted-foreground"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:P?"No experiments match your search criteria":"No experiments found"}),P&&(0,r.jsx)(i.z,{variant:"outline",size:"sm",onClick:S,children:"Clear filters"})]})})}):T.map(e=>{var s;let t=e.current_uses+(e.waiting_count||0),a=t/e.max_uses*100,n=e.current_uses>=e.max_uses,c="used"===e.status,o=c?100:a,d=c?e.max_uses:t,m="".concat(window.location.origin,"/proxy/").concat(e.proxy_id);return(0,r.jsxs)(B,{children:[(0,r.jsx)(q,{children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(b.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,r.jsx)("span",{className:"font-medium",children:e.group_name||"Unnamed Group"})]})}),(0,r.jsx)(q,{children:(0,r.jsx)("div",{className:"flex items-center gap-1",children:(0,r.jsx)("code",{className:"text-xs font-mono bg-gray-100 px-2 py-1 rounded",children:e.otree_session_id||"N/A"})})}),(0,r.jsx)(q,{children:(0,r.jsx)(O.C,{variant:"outline",className:"text-xs",children:e.category||"Not Set"})}),(0,r.jsx)(q,{children:(0,r.jsx)("div",{className:"max-w-[200px]",children:(0,r.jsx)("span",{className:"text-sm text-muted-foreground truncate",title:e.treatment_title,children:e.treatment_title||"Not Set"})})}),(0,r.jsx)(q,{children:(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm font-mono",children:[(0,r.jsx)("span",{className:"truncate max-w-[200px]",title:m,children:m}),(0,r.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>E(m),className:"h-6 w-6 p-0",children:(0,r.jsx)(M.Z,{className:"h-3 w-3"})})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[(0,r.jsx)(Q.Z,{className:"h-3 w-3"}),(0,r.jsx)("span",{className:"truncate max-w-[200px]",title:e.real_url,children:e.real_url})]}),e.post_experiment_redirect_url&&(0,r.jsxs)("div",{className:"flex items-center gap-1 text-xs text-green-600",children:[(0,r.jsx)(Q.Z,{className:"h-3 w-3"}),(0,r.jsxs)("span",{className:"truncate max-w-[200px]",title:e.post_experiment_redirect_url,children:["Post: ",e.post_experiment_redirect_url]})]})]})}),(0,r.jsx)(q,{children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)("span",{className:"font-medium",children:[d,"/",e.max_uses]}),c?(0,r.jsx)("span",{className:"text-xs text-green-600 font-medium",children:"All participants completed"}):e.waiting_count&&e.waiting_count>0?(0,r.jsxs)("span",{className:"text-xs text-muted-foreground",children:[e.current_uses," completed, ",e.waiting_count," waiting"]}):null]}),!c&&e.is_active&&void 0!==e.waiting_count&&e.waiting_count>0&&(0,r.jsxs)(O.C,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700 border-blue-200",children:[e.waiting_count," waiting"]}),c&&(0,r.jsx)(O.C,{variant:"outline",className:"text-xs bg-green-50 text-green-700 border-green-200",children:"Completed"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(G.E,{value:o,className:"h-2 ".concat(c?"opacity-90":"")}),!c&&e.waiting_count&&e.waiting_count>0&&(0,r.jsx)("div",{className:"absolute top-0 left-0 h-2 bg-green-500 rounded-full transition-all",style:{width:"".concat(e.current_uses/e.max_uses*100,"%")}}),c&&(0,r.jsx)("div",{className:"absolute top-0 left-0 h-2 bg-green-500 rounded-full w-full transition-all"})]}),e.is_active&&void 0!==e.waiting_count&&e.waiting_count>0&&(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Participants in waiting room: ",null===(s=e.waiting_participants)||void 0===s?void 0:s.map(e=>"#".concat(e.participant_number)).join(", ")]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,r.jsx)("span",{children:"Completed"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,r.jsx)("span",{children:"Waiting"})]})]})]})]})}),(0,r.jsx)(q,{children:(0,r.jsx)(O.C,{variant:e.is_active?c?"default":n?"destructive":"default":"secondary",className:c?"bg-green-100 text-green-800 border-green-300":e.is_active?n?"bg-red-100 text-red-800 border-red-300":"bg-blue-100 text-blue-800 border-blue-300":"",children:e.is_active?c?"Used":n?"Full":"Active":"Inactive"})}),(0,r.jsx)(q,{children:(0,r.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[(0,r.jsx)(K.Z,{className:"h-3 w-3"}),new Date(e.created_at).toLocaleDateString()]})}),(0,r.jsx)(q,{className:"text-right",children:(0,r.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[l&&(0,r.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>l(e.proxy_id),className:"h-8 w-8 p-0 text-blue-600 hover:text-blue-700",title:"View waiting room details",children:(0,r.jsx)(b.Z,{className:"h-3 w-3"})}),(0,r.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>E(m),className:"h-8 w-8 p-0",title:"Copy pre-experiment link",children:(0,r.jsx)(M.Z,{className:"h-3 w-3"})}),(0,r.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>en(e),className:"h-8 w-8 p-0 text-purple-600 hover:text-purple-700",title:"Configure post-experiment redirect URL",children:(0,r.jsx)(ee.Z,{className:"h-3 w-3"})}),e.post_experiment_redirect_url&&(0,r.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>E("".concat(window.location.origin,"/redirect/").concat(e.proxy_id),"Post-experiment redirect link copied! Use this in your oTree final page."),className:"h-8 w-8 p-0 text-green-600 hover:text-green-700",title:"Copy post-experiment redirect link for oTree",children:(0,r.jsx)(Q.Z,{className:"h-3 w-3"})}),(0,r.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>D(e.proxy_id,e.is_active),className:"h-8 w-8 p-0",children:e.is_active?(0,r.jsx)(es.Z,{className:"h-3 w-3"}):(0,r.jsx)(et.Z,{className:"h-3 w-3"})}),(0,r.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>A(e.proxy_id),className:"h-8 w-8 p-0",children:(0,r.jsx)(er.Z,{className:"h-3 w-3"})}),(0,r.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>ei(e.proxy_id,e.group_name||"Unnamed Group"),className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:(0,r.jsx)(ea.Z,{className:"h-3 w-3"})})]})})]},e.proxy_id)})})]})})]}),(0,r.jsx)(el,{open:!!j,onOpenChange:()=>N(null),children:(0,r.jsxs)(eo,{className:"sm:max-w-[600px]",children:[(0,r.jsxs)(ed,{children:[(0,r.jsxs)(ex,{className:"flex items-center gap-2",children:[(0,r.jsx)(ee.Z,{className:"h-5 w-5 text-purple-600"}),"Configure Post-Experiment Redirect"]}),(0,r.jsxs)(eu,{children:["Set the Prolific completion URL for ",(0,r.jsx)("strong",{children:null==j?void 0:j.groupName})]})]}),(0,r.jsxs)("div",{className:"space-y-4 py-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(x._,{htmlFor:"redirectUrl",className:"text-sm font-semibold",children:"Prolific Completion URL"}),(0,r.jsx)(m,{id:"redirectUrl",type:"url",placeholder:"https://app.prolific.com/submissions/complete?cc=XXXXXXXX",value:y,onChange:e=>v(e.target.value),disabled:w,className:"font-mono text-sm"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"After creating your Prolific study, copy the completion URL and paste it here."})]}),j&&(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(x._,{className:"text-xs font-semibold text-blue-900",children:"Link Code:"}),(0,r.jsx)("code",{className:"block mt-1 px-2 py-1 bg-white border border-blue-300 rounded text-sm font-mono text-blue-900",children:j.proxyId})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(x._,{className:"text-xs font-semibold text-blue-900",children:"oTree Session ID:"}),(0,r.jsx)("code",{className:"block mt-1 px-2 py-1 bg-white border border-blue-300 rounded text-sm font-mono text-blue-900",children:j.otreeSessionId})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(x._,{className:"text-xs font-semibold text-blue-900",children:"Post-Experiment Link (for oTree):"}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,r.jsx)("code",{className:"flex-1 px-2 py-1 bg-white border border-blue-300 rounded text-xs font-mono text-blue-900 truncate",children:"".concat(window.location.origin,"/redirect/").concat(j.proxyId)}),(0,r.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>E("".concat(window.location.origin,"/redirect/").concat(j.proxyId),"Post-experiment link"),className:"shrink-0 h-7",children:(0,r.jsx)(M.Z,{className:"h-3 w-3"})})]}),(0,r.jsx)("p",{className:"text-xs text-blue-700 mt-1",children:"Add this link to your oTree experiment's final page"})]})]}),(null==j?void 0:j.currentUrl)&&(0,r.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:[(0,r.jsx)(x._,{className:"text-xs font-semibold text-amber-900",children:"Current URL:"}),(0,r.jsx)("code",{className:"block mt-1 px-2 py-1 bg-white border border-amber-300 rounded text-xs font-mono text-amber-900 break-all",children:j.currentUrl})]})]}),(0,r.jsxs)(em,{children:[(0,r.jsx)(i.z,{variant:"outline",onClick:()=>N(null),disabled:w,children:"Cancel"}),(0,r.jsx)(i.z,{onClick:ec,disabled:w||!y,className:"bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700",children:w?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Redirect URL"})]})]})})]})}eu.displayName=ei.dk.displayName;var eh=t(4056);function ef(){let{showToast:e}=(0,I.useToast)();return(0,r.jsxs)(d.Zb,{className:"shadow-lg border-0 bg-white/80 backdrop-blur-sm",children:[(0,r.jsxs)(d.Ol,{children:[(0,r.jsxs)(d.ll,{className:"flex items-center gap-2 text-gray-900",children:[(0,r.jsx)("div",{className:"p-2 rounded-lg bg-gradient-to-r from-purple-100 to-pink-100",children:(0,r.jsx)(eh.Z,{className:"h-5 w-5 text-purple-600"})}),"Post-Experiment Redirect Guide"]}),(0,r.jsx)(d.SZ,{className:"text-gray-600",children:"Each experiment link now has its own unique post-experiment redirect URL"})]}),(0,r.jsxs)(d.aY,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,r.jsxs)("h4",{className:"font-semibold text-blue-900 mb-3 flex items-center gap-2",children:[(0,r.jsx)(eh.Z,{className:"h-5 w-5"}),"How It Works"]}),(0,r.jsxs)("ul",{className:"text-sm text-blue-800 space-y-2",children:[(0,r.jsx)("li",{children:"• Each experiment link you create has its own post-experiment redirect URL"}),(0,r.jsx)("li",{children:"• You configure the redirect URL when creating a new experiment link"}),(0,r.jsx)("li",{children:"• This allows different experiments to redirect to different destinations"}),(0,r.jsx)("li",{children:"• Perfect for managing 12 different treatment/gender combinations"})]})]}),(0,r.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-green-900 mb-3",children:"Using Redirect Links in oTree"}),(0,r.jsx)("p",{className:"text-sm text-green-800 mb-3",children:"After creating an experiment link, use this format in your oTree experiment:"}),(0,r.jsx)("div",{className:"bg-white p-3 rounded border border-green-300 mb-3",children:(0,r.jsx)("code",{className:"text-sm text-green-900",children:"".concat(window.location.origin,"/redirect/[PROXY_ID]")})}),(0,r.jsx)("p",{className:"text-xs text-green-700",children:"Replace [PROXY_ID] with the actual proxy ID from your experiment link"})]}),(0,r.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-purple-900 mb-3",children:"Example Setup"}),(0,r.jsxs)("div",{className:"space-y-3 text-sm text-purple-800",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium mb-1",children:"1. Create experiment link:"}),(0,r.jsxs)("ul",{className:"ml-4 space-y-1",children:[(0,r.jsx)("li",{children:'• Group: "Treatment 1 - All Male"'}),(0,r.jsx)("li",{children:"• Category: All Male"}),(0,r.jsx)("li",{children:"• Treatment: Treatment 1"}),(0,r.jsx)("li",{children:"• Post-Experiment URL: https://prolific.com/completion?code=ABC123"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium mb-1",children:"2. System generates proxy ID:"}),(0,r.jsx)("ul",{className:"ml-4 space-y-1",children:(0,r.jsx)("li",{children:"• Example: abc123def456"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium mb-1",children:"3. Use in oTree final page:"}),(0,r.jsx)("ul",{className:"ml-4 space-y-1",children:(0,r.jsxs)("li",{children:["• Link: ","".concat(window.location.origin,"/redirect/abc123def456")]})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium mb-1",children:"4. Participant experience:"}),(0,r.jsxs)("ul",{className:"ml-4 space-y-1",children:[(0,r.jsx)("li",{children:"• Clicks link in oTree"}),(0,r.jsx)("li",{children:"• Sees beautiful countdown screen (5 seconds)"}),(0,r.jsx)("li",{children:"• Automatically redirected to Prolific completion URL"})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-amber-900 mb-3",children:"Benefits of Link-Specific Redirects"}),(0,r.jsxs)("ul",{className:"text-sm text-amber-800 space-y-2",children:[(0,r.jsx)("li",{children:"✅ Different Prolific completion codes for each experiment"}),(0,r.jsx)("li",{children:"✅ Separate tracking for different treatment groups"}),(0,r.jsx)("li",{children:"✅ Flexibility to redirect to different platforms (Prolific, Qualtrics, etc.)"}),(0,r.jsx)("li",{children:"✅ Easy management of 12 different experiment configurations"}),(0,r.jsx)("li",{children:"✅ No confusion between different studies"})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:"Quick Reference"}),(0,r.jsxs)("div",{className:"space-y-2 text-sm text-gray-700",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Step 1:"})," Create experiment link with post-experiment redirect URL"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Step 2:"})," Copy the proxy ID from the links table"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Step 3:"})," Use ","".concat(window.location.origin,"/redirect/[PROXY_ID]")," in oTree"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Step 4:"})," Participants automatically redirected after experiment"]})]})]})]})]})}var eg=t(7094);let ej=eg.fC,eb=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(eg.aV,{ref:s,className:(0,l.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...a})});eb.displayName=eg.aV.displayName;let eN=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(eg.xz,{ref:s,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...a})});eN.displayName=eg.xz.displayName;let ey=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(eg.VY,{ref:s,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...a})});ey.displayName=eg.VY.displayName;var ev=t(4280),ew=t(8063),ek=t(3067),eC=t(6141),e_=t(9806);function eT(e){let{proxyId:s,onBack:t}=e,[l,n]=(0,a.useState)(null),[c,o]=(0,a.useState)(!0);(0,a.useEffect)(()=>{m()},[s]);let m=async()=>{try{let e=await fetch("/api/admin/waiting-room-details?proxyId=".concat(s),{credentials:"include"});if(e.ok){let s=await e.json();n(s)}}catch(e){console.error("Error loading waiting room data:",e)}finally{o(!1)}},x=e=>new Date(e).toLocaleTimeString();return c?(0,r.jsx)(d.Zb,{children:(0,r.jsxs)(d.aY,{className:"p-8 text-center",children:[(0,r.jsx)(ev.Z,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-primary-600"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Loading waiting room data..."})]})}):l?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(d.Zb,{children:(0,r.jsx)(d.Ol,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(d.ll,{className:"text-2xl",children:l.link.group_name}),(0,r.jsx)(d.SZ,{className:"mt-2",children:"Real-time monitoring of waiting room participants"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)(i.z,{variant:"outline",size:"sm",onClick:m,children:[(0,r.jsx)(ev.Z,{className:"mr-2 h-4 w-4"}),"Refresh"]}),(0,r.jsxs)(i.z,{variant:"outline",size:"sm",onClick:t,children:[(0,r.jsx)(ek.Z,{className:"mr-2 h-4 w-4"}),"Back"]})]})]})})}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,r.jsx)(d.Zb,{children:(0,r.jsxs)(d.aY,{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Participants"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:l.statistics.total_participants})]}),(0,r.jsx)(b.Z,{className:"h-8 w-8 text-blue-600"})]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:[l.statistics.capacity_remaining," spots remaining"]})]})}),(0,r.jsx)(d.Zb,{children:(0,r.jsxs)(d.aY,{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Waiting"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-amber-600",children:l.statistics.waiting_count})]}),(0,r.jsx)(eC.Z,{className:"h-8 w-8 text-amber-600"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"In waiting room"})]})}),(0,r.jsx)(d.Zb,{children:(0,r.jsxs)(d.aY,{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Groups Formed"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-green-600",children:l.statistics.groups_formed})]}),(0,r.jsx)(v.Z,{className:"h-8 w-8 text-green-600"})]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:[l.statistics.redirected_count," participants redirected"]})]})}),(0,r.jsx)(d.Zb,{children:(0,r.jsxs)(d.aY,{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Capacity"}),(0,r.jsxs)("p",{className:"text-3xl font-bold text-purple-600",children:[l.statistics.capacity_percentage,"%"]})]}),(0,r.jsx)(y.Z,{className:"h-8 w-8 text-purple-600"})]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:[l.link.max_uses," total capacity"]})]})})]}),(0,r.jsxs)(d.Zb,{children:[(0,r.jsx)(d.Ol,{children:(0,r.jsx)(d.ll,{className:"text-lg",children:"Room Information"})}),(0,r.jsx)(d.aY,{children:(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Category"}),(0,r.jsx)(O.C,{variant:"outline",className:"mt-1",children:l.link.category||"No Gender"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Group Size"}),(0,r.jsxs)("p",{className:"text-sm text-gray-900 mt-1",children:[l.link.group_size," participants per group"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Status"}),(0,r.jsx)(O.C,{variant:l.link.is_active?"default":"secondary",className:"mt-1",children:l.link.is_active?"Active":"Inactive"})]})]})})]}),(0,r.jsxs)(d.Zb,{children:[(0,r.jsx)(d.Ol,{children:(0,r.jsx)(d.ll,{className:"text-lg",children:"Participants"})}),(0,r.jsx)(d.aY,{children:(0,r.jsxs)(ej,{defaultValue:"waiting",className:"w-full",children:[(0,r.jsxs)(eb,{className:"grid w-full grid-cols-3",children:[(0,r.jsxs)(eN,{value:"waiting",children:["Waiting (",l.statistics.waiting_count,")"]}),(0,r.jsxs)(eN,{value:"redirected",children:["Redirected (",l.statistics.redirected_count,")"]}),(0,r.jsxs)(eN,{value:"expired",children:["Expired (",l.statistics.expired_count,")"]})]}),(0,r.jsx)(ey,{value:"waiting",className:"space-y-4",children:0===l.participants.waiting.length?(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,r.jsx)(eC.Z,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,r.jsx)("p",{children:"No participants waiting"})]}):(0,r.jsx)("div",{className:"space-y-2",children:l.participants.waiting.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-amber-50 border border-amber-200 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-amber-100 text-amber-700 font-bold",children:["#",e.participant_number]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-gray-900",children:e.prolific_pid||"No Prolific ID"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Gender: ",(0,r.jsx)("span",{className:"font-medium",children:e.gender||"Not specified"})]})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Joined at"}),(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:x(e.joined_at)})]})]},e.participant_number))})}),(0,r.jsx)(ey,{value:"redirected",className:"space-y-4",children:0===l.participants.redirected.length?(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,r.jsx)(v.Z,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,r.jsx)("p",{children:"No groups formed yet"})]}):(0,r.jsx)("div",{className:"space-y-4",children:l.participants.redirected.map((e,s)=>(0,r.jsxs)("div",{className:"border border-green-200 rounded-lg overflow-hidden",children:[(0,r.jsx)("div",{className:"bg-green-50 px-4 py-3 border-b border-green-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(v.Z,{className:"h-5 w-5 text-green-600"}),(0,r.jsxs)("span",{className:"font-semibold text-green-900",children:["Group ",s+1]}),(0,r.jsxs)(O.C,{variant:"outline",className:"ml-2",children:[e.members.length," members"]})]}),(0,r.jsxs)("p",{className:"text-sm text-green-700",children:["Redirected at ",x(e.redirected_at)]})]})}),(0,r.jsx)("div",{className:"divide-y divide-gray-200",children:e.members.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white hover:bg-gray-50",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-green-100 text-green-700 font-bold",children:["#",e.participant_number]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-gray-900",children:e.prolific_pid||"No Prolific ID"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Gender: ",(0,r.jsx)("span",{className:"font-medium",children:e.gender||"Not specified"})]})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Joined at"}),(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:x(e.joined_at)})]})]},e.participant_number))})]},e.group_session_id))})}),(0,r.jsx)(ey,{value:"expired",className:"space-y-4",children:0===l.participants.expired.length?(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,r.jsx)(e_.Z,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,r.jsx)("p",{children:"No expired participants"})]}):(0,r.jsx)("div",{className:"space-y-2",children:l.participants.expired.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-red-100 text-red-700 font-bold",children:["#",e.participant_number]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-gray-900",children:e.prolific_pid||"No Prolific ID"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Gender: ",(0,r.jsx)("span",{className:"font-medium",children:e.gender||"Not specified"})]})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Joined at"}),(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:x(e.joined_at)})]})]},e.participant_number))})})]})})]})]}):(0,r.jsx)(d.Zb,{children:(0,r.jsxs)(d.aY,{className:"p-8 text-center",children:[(0,r.jsx)(ew.Z,{className:"h-8 w-8 mx-auto mb-4 text-red-600"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Failed to load waiting room data"}),(0,r.jsxs)(i.z,{onClick:t,className:"mt-4",children:[(0,r.jsx)(ek.Z,{className:"mr-2 h-4 w-4"}),"Back to Dashboard"]})]})})}function eS(){let[e,s]=(0,a.useState)([]),[t,i]=(0,a.useState)({total:0,active:0,participants:0,full:0}),[l,c]=(0,a.useState)(!0),[o,d]=(0,a.useState)(null);(0,a.useEffect)(()=>{m()},[]);let m=async()=>{try{let[e,t]=await Promise.all([fetch("/api/admin/links",{credentials:"include"}),fetch("/api/admin/stats",{credentials:"include"})]);if(e.ok&&t.ok){let r=await e.json(),a=await t.json();s(r),i(a)}}catch(e){console.error("Error loading data:",e)}finally{c(!1)}};return l?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"grid gap-4 md:grid-cols-4",children:Array.from({length:4}).map((e,s)=>(0,r.jsx)(n,{className:"h-24 w-full"},s))}),(0,r.jsx)(n,{className:"h-48 w-full"}),(0,r.jsx)(n,{className:"h-64 w-full"})]}):o?(0,r.jsx)(eT,{proxyId:o,onBack:()=>{d(null),m()}}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),(0,r.jsxs)("button",{onClick:m,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[(0,r.jsx)("svg",{className:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})]}),(0,r.jsx)(k,{stats:t,links:e}),(0,r.jsx)(A,{onLinkCreated:()=>{m()}}),(0,r.jsx)(ep,{links:e,onLinkAction:()=>{m()},onViewRoom:e=>{d(e)}}),(0,r.jsx)(ef,{})]})}function eZ(){let[e,s]=(0,a.useState)(null),[t,l]=(0,a.useState)(!0);(0,a.useEffect)(()=>{d()},[]);let d=async()=>{try{let e=await fetch("/api/admin/check-auth",{credentials:"include"}),t=await e.json();s(t.isLoggedIn)}catch(e){console.error("Error checking auth status:",e),s(!1)}finally{l(!1)}},m=async()=>{try{await fetch("/api/admin/logout",{method:"POST",credentials:"include"}),s(!1)}catch(e){console.error("Error logging out:",e)}};return t?(0,r.jsx)("div",{className:"min-h-screen bg-background",children:(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"mb-8 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(n,{className:"h-8 w-8 rounded"}),(0,r.jsx)(n,{className:"h-8 w-48"})]}),(0,r.jsx)(n,{className:"h-10 w-24"})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"grid gap-4 md:grid-cols-4",children:Array.from({length:4}).map((e,s)=>(0,r.jsx)(n,{className:"h-24 w-full"},s))}),(0,r.jsx)(n,{className:"h-64 w-full"})]})]})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-background to-accent-50",children:[(0,r.jsx)("div",{className:"border-b bg-white/80 backdrop-blur-sm shadow-sm",children:(0,r.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-r from-primary-600 to-accent-600 text-white",children:(0,r.jsx)(c.Z,{className:"h-5 w-5"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"oTree Proxy Manager"}),(0,r.jsx)("p",{className:"text-sm text-primary-600/70",children:"Professional Link Management System"})]})]}),e&&(0,r.jsxs)(i.z,{variant:"outline",size:"sm",onClick:m,className:"gap-2 border-primary-200 text-primary-700 hover:bg-primary-50",children:[(0,r.jsx)(o.Z,{className:"h-4 w-4"}),"Sign Out"]})]})})}),(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:e?(0,r.jsx)(eS,{}):(0,r.jsx)(j,{onLoginSuccess:()=>{s(!0)}})})]})}},7929:function(e,s,t){"use strict";t.d(s,{X:function(){return o},bZ:function(){return c}});var r=t(7437),a=t(2265),i=t(6061),l=t(1657);let n=(0,i.j)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=a.forwardRef((e,s)=>{let{className:t,variant:a,...i}=e;return(0,r.jsx)("div",{ref:s,role:"alert",className:(0,l.cn)(n({variant:a}),t),...i})});c.displayName="Alert",a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("h5",{ref:s,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",t),...a})}).displayName="AlertTitle";let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",t),...a})});o.displayName="AlertDescription"},1478:function(e,s,t){"use strict";t.d(s,{C:function(){return n}});var r=t(7437);t(2265);var a=t(6061),i=t(1657);let l=(0,a.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:s,variant:t,...a}=e;return(0,r.jsx)("div",{className:(0,i.cn)(l({variant:t}),s),...a})}},5754:function(e,s,t){"use strict";t.d(s,{z:function(){return o}});var r=t(7437),a=t(2265),i=t(7256),l=t(6061),n=t(1657);let c=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,s)=>{let{className:t,variant:a,size:l,asChild:o=!1,...d}=e,m=o?i.g7:"button";return(0,r.jsx)(m,{className:(0,n.cn)(c({variant:a,size:l,className:t})),ref:s,...d})});o.displayName="Button"},7815:function(e,s,t){"use strict";t.d(s,{Ol:function(){return n},SZ:function(){return o},Zb:function(){return l},aY:function(){return d},ll:function(){return c}});var r=t(7437),a=t(2265),i=t(1657);let l=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,i.cn)("rounded-xl border bg-card text-card-foreground shadow",t),...a})});l.displayName="Card";let n=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",t),...a})});n.displayName="CardHeader";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,i.cn)("font-semibold leading-none tracking-tight",t),...a})});c.displayName="CardTitle";let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",t),...a})});o.displayName="CardDescription";let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,i.cn)("p-6 pt-0",t),...a})});d.displayName="CardContent",a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",t),...a})}).displayName="CardFooter"},9842:function(e,s,t){"use strict";t.d(s,{_:function(){return o}});var r=t(7437),a=t(2265),i=t(6743),l=t(6061),n=t(1657);let c=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(i.f,{ref:s,className:(0,n.cn)(c(),t),...a})});o.displayName=i.f.displayName},500:function(e,s,t){"use strict";t.d(s,{E:function(){return n}});var r=t(7437),a=t(2265),i=t(3177),l=t(1657);let n=a.forwardRef((e,s)=>{let{className:t,value:a,...n}=e;return(0,r.jsx)(i.fC,{ref:s,className:(0,l.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",t),...n,children:(0,r.jsx)(i.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});n.displayName=i.fC.displayName},8338:function(e,s,t){"use strict";t.r(s),t.d(s,{ToastProvider:function(){return h},useToast:function(){return u}});var r=t(7437),a=t(2265),i=t(2167),l=t(5251),n=t(4530),c=t(9806),o=t(4631),d=t(4056),m=t(2549);let x=(0,a.createContext)(void 0),u=()=>{let e=(0,a.useContext)(x);if(!e)throw Error("useToast must be used within a ToastProvider");return e},p={success:{icon:n.Z,bgColor:"bg-success-50 border-success-200",iconColor:"text-success-600",titleColor:"text-success-800",descColor:"text-success-700"},error:{icon:c.Z,bgColor:"bg-error-50 border-error-200",iconColor:"text-error-600",titleColor:"text-error-800",descColor:"text-error-700"},warning:{icon:o.Z,bgColor:"bg-warning-50 border-warning-200",iconColor:"text-warning-600",titleColor:"text-warning-800",descColor:"text-warning-700"},info:{icon:d.Z,bgColor:"bg-blue-50 border-blue-200",iconColor:"text-blue-600",titleColor:"text-blue-800",descColor:"text-blue-700"}},h=e=>{let{children:s}=e,[t,n]=(0,a.useState)([]),c=(0,a.useCallback)((e,s,t)=>{let r=Math.random().toString(36).substr(2,9),a={id:r,type:e,title:s,description:t};n(e=>[...e,a]),setTimeout(()=>{n(e=>e.filter(e=>e.id!==r))},5e3)},[]),o=(0,a.useCallback)(e=>{n(s=>s.filter(s=>s.id!==e))},[]);return(0,r.jsxs)(x.Provider,{value:{showToast:c},children:[s,(0,r.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:(0,r.jsx)(i.M,{children:t.map(e=>{let s=p[e.type],t=s.icon;return(0,r.jsx)(l.E.div,{initial:{opacity:0,x:300,scale:.3},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:300,scale:.5,transition:{duration:.2}},className:"".concat(s.bgColor," border rounded-lg p-4 shadow-lg max-w-sm min-w-[300px] backdrop-blur-sm"),children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)(t,{className:"h-5 w-5 ".concat(s.iconColor," flex-shrink-0 mt-0.5")}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-semibold ".concat(s.titleColor),children:e.title}),e.description&&(0,r.jsx)("p",{className:"text-sm mt-1 ".concat(s.descColor),children:e.description})]}),(0,r.jsx)("button",{onClick:()=>o(e.id),className:"".concat(s.iconColor," hover:opacity-70 transition-opacity flex-shrink-0"),children:(0,r.jsx)(m.Z,{className:"h-4 w-4"})})]})},e.id)})})})]})}},1657:function(e,s,t){"use strict";t.d(s,{cn:function(){return i}});var r=t(7042),a=t(4769);function i(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,a.m6)((0,r.W)(s))}}},function(e){e.O(0,[609,790,283,245,971,938,744],function(){return e(e.s=4588)}),_N_E=e.O()}]);